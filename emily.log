2022-04-15 16:46:10.128 | INFO     | uvicorn.server:serve:63 - Started server process [1526]
2022-04-15 16:46:10.130 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 16:46:10.130 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 16:46:10.138 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 16:46:15.718 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/
2022-04-15 16:46:15.724 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/
2022-04-15 16:46:15.874 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/favicon.ico
2022-04-15 16:46:15.875 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 404 for http://localhost:4242/favicon.ico
2022-04-15 16:46:17.889 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 16:46:17.890 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 16:46:18.227 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 16:46:18.230 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 62, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f01242ddd30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f0124f61160>
    └ <uvicorn.server.Server object at 0x7f012368c310>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f0124f611f0>
    │    │                  └ <uvicorn.server.Server object at 0x7f012368c310>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f012304dee0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122dcf160>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f012304df70>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122dcf160>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122dcf160>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0123777ac0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122dcf1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122d...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f01236b4c40>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0123777ac0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122dcf1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122d...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122dcf1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122d...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0122e30280>
          └ <fastapi.applications.FastAPI object at 0x7f01236b4c40>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0122e32550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0122e30250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0122e30280>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0122e32550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f01236fa100>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0122e30250>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f0123762820>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f01236fa100>
                     │    │             └ <starlette.requests.Request object at 0x7f0122dbbee0>
                     │    └ <function http_request_logging_middleware at 0x7f0123701040>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f01236fa100>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f0122dbbee0>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f01236fa100>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-16' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/si...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f0122dbb3d0 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f01236fa0d0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f01236fa100>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0122dbe700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f0122e21d90>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f01236fa0d0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0122dbe700>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122d...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f01237c5280>
          └ <starlette.routing.Route object at 0x7f0122e21e20>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0122dbe700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f0122d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f0122e279d0>
          └ <starlette.routing.Route object at 0x7f0122e21e20>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f0122dbb3a0>
                     └ <function FastAPI.setup.<locals>.openapi at 0x7f01230500d0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 152, in openapi
    return JSONResponse(self.openapi())
           │            │    └ <function FastAPI.openapi at 0x7f012376e9d0>
           │            └ <fastapi.applications.FastAPI object at 0x7f01236b4c40>
           └ <class 'starlette.responses.JSONResponse'>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 130, in openapi
    self.openapi_schema = get_openapi(
    │    │                └ <function get_openapi at 0x7f0123762160>
    │    └ None
    └ <fastapi.applications.FastAPI object at 0x7f01236b4c40>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 359, in get_openapi
    result = get_openapi_path(route=route, model_name_map=model_name_map)
             │                      │                     └ {}
             │                      └ <fastapi.routing.APIRoute object at 0x7f0122e30880>
             └ <function get_openapi_path at 0x7f0123762040>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 185, in get_openapi_path
    operation_parameters = get_openapi_operation_parameters(
                           └ <function get_openapi_operation_parameters at 0x7f012375ec10>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 98, in get_openapi_operation_parameters
    "schema": field_schema(
              └ <cyfunction field_schema at 0x7f0123c3dc70>

  File "pydantic/schema.py", line 241, in pydantic.schema.field_schema
    f_schema, f_definitions, f_nested_models = field_type_schema(
                                               └ <cyfunction field_type_schema at 0x7f0123c43380>

  File "pydantic/schema.py", line 495, in pydantic.schema.field_type_schema
    f_schema, f_definitions, f_nested_models = field_singleton_schema(
                                               └ <cyfunction field_singleton_schema at 0x7f0123c43930>

  File "pydantic/schema.py", line 863, in pydantic.schema.field_singleton_schema
    raise ValueError(f'Value not declarable with JSON Schema, field: {field}')

ValueError: Value not declarable with JSON Schema, field: name='file' type=UploadFile required=True

2022-04-15 16:46:27.183 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 16:46:27.184 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 16:46:27.288 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 16:46:27.289 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 62, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f01242ddd30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f0124f61160>
    └ <uvicorn.server.Server object at 0x7f012368c310>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f0124f611f0>
    │    │                  └ <uvicorn.server.Server object at 0x7f012368c310>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f012304dee0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232c9100>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f012304df70>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232c9100>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232c9100>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0123777ac0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232c91...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f01236b4c40>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0123777ac0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232c91...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232c91...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0122e30280>
          └ <fastapi.applications.FastAPI object at 0x7f01236b4c40>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0122dbe9d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0122e30250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0122e30280>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0122dbe9d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f01236fa100>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0122e30250>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f0123762820>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f01236fa100>
                     │    │             └ <starlette.requests.Request object at 0x7f0122dcf910>
                     │    └ <function http_request_logging_middleware at 0x7f0123701040>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f01236fa100>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f0122dcf910>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f01236fa100>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-22' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/si...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f0122dcfa00 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f01236fa0d0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f01236fa100>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f01204334c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f0122e21d90>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f01236fa0d0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f01204334c0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f01237c5280>
          └ <starlette.routing.Route object at 0x7f0122e21e20>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f01204334c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f01232...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f0122e279d0>
          └ <starlette.routing.Route object at 0x7f0122e21e20>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f0122dcfc70>
                     └ <function FastAPI.setup.<locals>.openapi at 0x7f01230500d0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 152, in openapi
    return JSONResponse(self.openapi())
           │            │    └ <function FastAPI.openapi at 0x7f012376e9d0>
           │            └ <fastapi.applications.FastAPI object at 0x7f01236b4c40>
           └ <class 'starlette.responses.JSONResponse'>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 130, in openapi
    self.openapi_schema = get_openapi(
    │    │                └ <function get_openapi at 0x7f0123762160>
    │    └ None
    └ <fastapi.applications.FastAPI object at 0x7f01236b4c40>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 359, in get_openapi
    result = get_openapi_path(route=route, model_name_map=model_name_map)
             │                      │                     └ {}
             │                      └ <fastapi.routing.APIRoute object at 0x7f0122e30880>
             └ <function get_openapi_path at 0x7f0123762040>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 185, in get_openapi_path
    operation_parameters = get_openapi_operation_parameters(
                           └ <function get_openapi_operation_parameters at 0x7f012375ec10>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 98, in get_openapi_operation_parameters
    "schema": field_schema(
              └ <cyfunction field_schema at 0x7f0123c3dc70>

  File "pydantic/schema.py", line 241, in pydantic.schema.field_schema
    f_schema, f_definitions, f_nested_models = field_type_schema(
                                               └ <cyfunction field_type_schema at 0x7f0123c43380>

  File "pydantic/schema.py", line 495, in pydantic.schema.field_type_schema
    f_schema, f_definitions, f_nested_models = field_singleton_schema(
                                               └ <cyfunction field_singleton_schema at 0x7f0123c43930>

  File "pydantic/schema.py", line 863, in pydantic.schema.field_singleton_schema
    raise ValueError(f'Value not declarable with JSON Schema, field: {field}')

ValueError: Value not declarable with JSON Schema, field: name='file' type=UploadFile required=True

2022-04-15 16:46:49.175 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 16:46:49.276 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 16:46:49.277 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 16:46:49.278 | INFO     | uvicorn.server:serve:73 - Finished server process [1526]
2022-04-15 16:46:51.650 | INFO     | uvicorn.server:serve:63 - Started server process [1737]
2022-04-15 16:46:51.651 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 16:46:51.652 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 16:46:51.656 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 16:46:54.885 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/
2022-04-15 16:46:54.891 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/
2022-04-15 16:46:55.976 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 16:46:55.978 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 16:46:56.099 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 16:46:56.100 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 61, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f75d1291d30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f75d1f15160>
    └ <uvicorn.server.Server object at 0x7f75d0641310>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f75d1f151f0>
    │    │                  └ <uvicorn.server.Server object at 0x7f75d0641310>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f75d0001ee0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfdedb20>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f75d0001f70>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfdedb20>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfdedb20>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f75cffff610>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfdedb...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfd...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f75d0668dc0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f75cffff610>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfdedb...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfd...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfdedb...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfd...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f75cfde3280>
          └ <fastapi.applications.FastAPI object at 0x7f75d0668dc0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f75cfde5550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfd...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f75cfde3250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f75cfde3280>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f75cfde5550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfd...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f75d06ae100>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f75cfde3250>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f75d0717820>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f75d06ae100>
                     │    │             └ <starlette.requests.Request object at 0x7f75cfd812e0>
                     │    └ <function http_request_logging_middleware at 0x7f75d06b5040>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f75d06ae100>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f75cfd812e0>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f75d06ae100>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-12' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/si...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f75cfd813a0 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfd...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f75d06ae0d0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f75d06ae100>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f75cfd71700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfd...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f75cfdd5af0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f75d06ae0d0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f75cfd71700>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfd...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f75d0779280>
          └ <starlette.routing.Route object at 0x7f75cfdd5e20>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f75cfd71700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f75cfd...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f75cfdda9d0>
          └ <starlette.routing.Route object at 0x7f75cfdd5e20>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f75cfd81250>
                     └ <function FastAPI.setup.<locals>.openapi at 0x7f75d02820d0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 152, in openapi
    return JSONResponse(self.openapi())
           │            │    └ <function FastAPI.openapi at 0x7f75d07229d0>
           │            └ <fastapi.applications.FastAPI object at 0x7f75d0668dc0>
           └ <class 'starlette.responses.JSONResponse'>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 130, in openapi
    self.openapi_schema = get_openapi(
    │    │                └ <function get_openapi at 0x7f75d0717160>
    │    └ None
    └ <fastapi.applications.FastAPI object at 0x7f75d0668dc0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 359, in get_openapi
    result = get_openapi_path(route=route, model_name_map=model_name_map)
             │                      │                     └ {}
             │                      └ <fastapi.routing.APIRoute object at 0x7f75cfde3880>
             └ <function get_openapi_path at 0x7f75d0717040>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 185, in get_openapi_path
    operation_parameters = get_openapi_operation_parameters(
                           └ <function get_openapi_operation_parameters at 0x7f75d0712c10>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 98, in get_openapi_operation_parameters
    "schema": field_schema(
              └ <cyfunction field_schema at 0x7f75d0bf1c70>

  File "pydantic/schema.py", line 241, in pydantic.schema.field_schema
    f_schema, f_definitions, f_nested_models = field_type_schema(
                                               └ <cyfunction field_type_schema at 0x7f75d0bf7380>

  File "pydantic/schema.py", line 495, in pydantic.schema.field_type_schema
    f_schema, f_definitions, f_nested_models = field_singleton_schema(
                                               └ <cyfunction field_singleton_schema at 0x7f75d0bf7930>

  File "pydantic/schema.py", line 863, in pydantic.schema.field_singleton_schema
    raise ValueError(f'Value not declarable with JSON Schema, field: {field}')

ValueError: Value not declarable with JSON Schema, field: name='file' type=UploadFile required=True

2022-04-15 16:47:56.289 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 16:47:56.390 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 16:47:56.390 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 16:47:56.391 | INFO     | uvicorn.server:serve:73 - Finished server process [1737]
2022-04-15 16:48:07.328 | INFO     | uvicorn.server:serve:63 - Started server process [2087]
2022-04-15 16:48:07.329 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 16:48:07.329 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 16:48:07.333 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 16:48:16.216 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 16:48:16.217 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 16:48:16.293 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 16:48:16.298 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/openapi.json
2022-04-15 16:48:31.254 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 16:48:31.354 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 61, in <module>
    uvicorn.run(
    │       └ <function run at 0x7efdc7bf3d30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7efdc8877160>
    └ <uvicorn.server.Server object at 0x7efdc6fce9a0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7efdc88771f0>
    │    │                  └ <uvicorn.server.Server object at 0x7efdc6fce9a0>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7efdc6b80b80>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc6709490>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7efdc6b80c10>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc6709490>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc6709490>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7efdc6bafbe0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc67094...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc67...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7efdc6f874f0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7efdc6bafbe0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc67094...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc67...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc67094...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc67...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efdc66ee730>
          └ <fastapi.applications.FastAPI object at 0x7efdc6f874f0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7efdc66f91f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc67...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7efdc66ee700>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efdc66ee730>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '4372559', 'sec-ch-ua': '" Not A;Brand";v="9...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7efdc66f91f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc67...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7efdc703e700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7efdc66ee700>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7efdc66ee700>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc67...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efdc66ee3a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7efdc66ee700>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7efdc70314c0>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efdc66ee3a0>
                     │    │             └ <starlette.requests.Request object at 0x7efdc6709e80>
                     │    └ <function http_request_logging_middleware at 0x7efdc703eca0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efdc66ee3a0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7efdc6709e80>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efdc66ee3a0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-12' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/si...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7efdc6b74610 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc67...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7efdc66ee400>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efdc66ee3a0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efdc670e3a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc67...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7efdc66debe0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7efdc66ee400>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efdc670e3a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc67...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7efdc714cee0>
          └ <fastapi.routing.APIRoute object at 0x7efdc66eed60>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efdc670e3a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7efdc67...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7efdc66e6dc0>
          └ <fastapi.routing.APIRoute object at 0x7efdc66eed60>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7efdc458a130>
                     └ <function get_request_handler.<locals>.app at 0x7efdc66e6d30>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7efdc714c040>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 150, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'files': <starlette.datastructures.UploadFile object at 0x7efdc458a370>}
                 │                 │         └ <function upload at 0x7efdc66e6ca0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7efdc66eed90>
                 └ <function run_in_threadpool at 0x7efdc72f7ca0>
  File "/usr/local/lib/python3.8/site-packages/starlette/concurrency.py", line 34, in run_in_threadpool
    return await loop.run_in_executor(None, func, *args)
                 │    │                     │      └ (functools.partial(<function upload at 0x7efdc66e6ca0>, files=<starlette.datastructures.UploadFile object at 0x7efdc458a370>),)
                 │    │                     └ <built-in method run of Context object at 0x7efdc670f940>
                 │    └ <method 'run_in_executor' of 'uvloop.loop.Loop' objects>
                 └ <uvloop.Loop running=True closed=False debug=False>
  File "/usr/local/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
             │        │            └ None
             │        └ None
             └ None

  File "/workspace/api.py", line 45, in upload
    return {"filename": file.filename}

NameError: name 'file' is not defined

2022-04-15 16:48:37.826 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 16:48:37.926 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 16:48:37.927 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 16:48:37.928 | INFO     | uvicorn.server:serve:73 - Finished server process [2087]
2022-04-15 16:48:40.328 | INFO     | uvicorn.server:serve:63 - Started server process [2288]
2022-04-15 16:48:40.329 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 16:48:40.330 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 16:48:40.334 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 16:48:42.730 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 16:48:42.820 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 422 for http://localhost:4242/image
2022-04-15 16:48:48.941 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 16:48:49.029 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 422 for http://localhost:4242/image
2022-04-15 16:49:09.264 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 16:49:09.360 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 422 for http://localhost:4242/image
2022-04-15 16:49:51.466 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 16:49:51.567 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 16:49:51.568 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 16:49:51.569 | INFO     | uvicorn.server:serve:73 - Finished server process [2288]
2022-04-15 16:49:53.965 | INFO     | uvicorn.server:serve:63 - Started server process [2615]
2022-04-15 16:49:53.966 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 16:49:53.967 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 16:49:53.974 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 16:49:55.867 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 16:49:55.968 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 422 for http://localhost:4242/image
2022-04-15 16:50:19.948 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 16:50:19.963 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 422 for http://localhost:4242/image
2022-04-15 16:50:52.868 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 16:50:52.969 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 16:50:52.970 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 16:50:52.970 | INFO     | uvicorn.server:serve:73 - Finished server process [2615]
2022-04-15 16:50:55.310 | INFO     | uvicorn.server:serve:63 - Started server process [2876]
2022-04-15 16:50:55.312 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 16:50:55.313 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 16:50:55.317 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 16:51:01.151 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 16:51:01.152 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 16:51:01.236 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 16:51:01.237 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 61, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f97b473fd30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f97b53c3160>
    └ <uvicorn.server.Server object at 0x7f97b3b18790>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f97b53c31f0>
    │    │                  └ <uvicorn.server.Server object at 0x7f97b3b18790>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f97b36f9b80>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b3259730>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f97b36f9c10>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b3259730>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b3259730>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f97b3ad11c0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b32597...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b32...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f97b36db1c0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f97b3ad11c0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b32597...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b32...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b32597...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b32...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f97b323f640>
          └ <fastapi.applications.FastAPI object at 0x7f97b36db1c0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f97b32481f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b32...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f97b323f610>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f97b323f640>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f97b32481f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b32...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f97b323f2b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f97b323f610>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f97b3b7e4c0>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f97b323f2b0>
                     │    │             └ <starlette.requests.Request object at 0x7f97b3243e50>
                     │    └ <function http_request_logging_middleware at 0x7f97b3b8aca0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f97b323f2b0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f97b3243e50>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f97b323f2b0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-8' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f97b3259400 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b32...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f97b323f310>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f97b323f2b0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f97b30d03a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b32...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f97b3231f70>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f97b323f310>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f97b30d03a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b32...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f97b3c98ee0>
          └ <starlette.routing.Route object at 0x7f97b323f1f0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f97b30d03a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b32...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f97b3239670>
          └ <starlette.routing.Route object at 0x7f97b323f1f0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f97b3259160>
                     └ <function FastAPI.setup.<locals>.openapi at 0x7f97b36f9d30>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 152, in openapi
    return JSONResponse(self.openapi())
           │            │    └ <function FastAPI.openapi at 0x7f97b3b84670>
           │            └ <fastapi.applications.FastAPI object at 0x7f97b36db1c0>
           └ <class 'starlette.responses.JSONResponse'>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 130, in openapi
    self.openapi_schema = get_openapi(
    │    │                └ <function get_openapi at 0x7f97b3b73dc0>
    │    └ None
    └ <fastapi.applications.FastAPI object at 0x7f97b36db1c0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 359, in get_openapi
    result = get_openapi_path(route=route, model_name_map=model_name_map)
             │                      │                     └ {}
             │                      └ <fastapi.routing.APIRoute object at 0x7f97b323fc40>
             └ <function get_openapi_path at 0x7f97b3b73ca0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 185, in get_openapi_path
    operation_parameters = get_openapi_operation_parameters(
                           └ <function get_openapi_operation_parameters at 0x7f97b3b738b0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 98, in get_openapi_operation_parameters
    "schema": field_schema(
              └ <cyfunction field_schema at 0x7f97b409fc70>

  File "pydantic/schema.py", line 241, in pydantic.schema.field_schema
    f_schema, f_definitions, f_nested_models = field_type_schema(
                                               └ <cyfunction field_type_schema at 0x7f97b40a5380>

  File "pydantic/schema.py", line 495, in pydantic.schema.field_type_schema
    f_schema, f_definitions, f_nested_models = field_singleton_schema(
                                               └ <cyfunction field_singleton_schema at 0x7f97b40a5930>

  File "pydantic/schema.py", line 863, in pydantic.schema.field_singleton_schema
    raise ValueError(f'Value not declarable with JSON Schema, field: {field}')

ValueError: Value not declarable with JSON Schema, field: name='file' type=UploadFile required=True

2022-04-15 16:51:02.096 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 16:51:02.099 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 16:51:02.178 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 16:51:02.180 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 61, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f97b473fd30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f97b53c3160>
    └ <uvicorn.server.Server object at 0x7f97b3b18790>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f97b53c31f0>
    │    │                  └ <uvicorn.server.Server object at 0x7f97b3b18790>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f97b36f9b80>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36ed160>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f97b36f9c10>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36ed160>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36ed160>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f97b3ad11c0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36ed1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f97b36db1c0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f97b3ad11c0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36ed1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36ed1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f97b323f640>
          └ <fastapi.applications.FastAPI object at 0x7f97b36db1c0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f97b10b5f70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f97b323f610>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f97b323f640>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f97b10b5f70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f97b323f2b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f97b323f610>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f97b3b7e4c0>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f97b323f2b0>
                     │    │             └ <starlette.requests.Request object at 0x7f97b3259940>
                     │    └ <function http_request_logging_middleware at 0x7f97b3b8aca0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f97b323f2b0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f97b3259940>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f97b323f2b0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-14' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/si...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f97b3259c10 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f97b323f310>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f97b323f2b0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f97b30d05e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f97b3231f70>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f97b323f310>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f97b30d05e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f97b3c98ee0>
          └ <starlette.routing.Route object at 0x7f97b323f1f0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f97b30d05e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f97b36...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f97b3239670>
          └ <starlette.routing.Route object at 0x7f97b323f1f0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f97b3259ac0>
                     └ <function FastAPI.setup.<locals>.openapi at 0x7f97b36f9d30>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 152, in openapi
    return JSONResponse(self.openapi())
           │            │    └ <function FastAPI.openapi at 0x7f97b3b84670>
           │            └ <fastapi.applications.FastAPI object at 0x7f97b36db1c0>
           └ <class 'starlette.responses.JSONResponse'>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 130, in openapi
    self.openapi_schema = get_openapi(
    │    │                └ <function get_openapi at 0x7f97b3b73dc0>
    │    └ None
    └ <fastapi.applications.FastAPI object at 0x7f97b36db1c0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 359, in get_openapi
    result = get_openapi_path(route=route, model_name_map=model_name_map)
             │                      │                     └ {}
             │                      └ <fastapi.routing.APIRoute object at 0x7f97b323fc40>
             └ <function get_openapi_path at 0x7f97b3b73ca0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 185, in get_openapi_path
    operation_parameters = get_openapi_operation_parameters(
                           └ <function get_openapi_operation_parameters at 0x7f97b3b738b0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 98, in get_openapi_operation_parameters
    "schema": field_schema(
              └ <cyfunction field_schema at 0x7f97b409fc70>

  File "pydantic/schema.py", line 241, in pydantic.schema.field_schema
    f_schema, f_definitions, f_nested_models = field_type_schema(
                                               └ <cyfunction field_type_schema at 0x7f97b40a5380>

  File "pydantic/schema.py", line 495, in pydantic.schema.field_type_schema
    f_schema, f_definitions, f_nested_models = field_singleton_schema(
                                               └ <cyfunction field_singleton_schema at 0x7f97b40a5930>

  File "pydantic/schema.py", line 863, in pydantic.schema.field_singleton_schema
    raise ValueError(f'Value not declarable with JSON Schema, field: {field}')

ValueError: Value not declarable with JSON Schema, field: name='file' type=UploadFile required=True

2022-04-15 16:51:12.271 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 16:51:12.373 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 16:51:12.373 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 16:51:12.374 | INFO     | uvicorn.server:serve:73 - Finished server process [2876]
2022-04-15 16:52:11.956 | INFO     | uvicorn.server:serve:63 - Started server process [3248]
2022-04-15 16:52:11.957 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 16:52:11.958 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 16:52:11.961 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 16:52:16.908 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 16:52:16.910 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 16:52:16.994 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 16:52:17.003 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/openapi.json
2022-04-15 16:52:43.350 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 16:52:43.452 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 16:52:43.453 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 16:52:43.453 | INFO     | uvicorn.server:serve:73 - Finished server process [3248]
2022-04-15 16:55:28.196 | INFO     | uvicorn.server:serve:63 - Started server process [3981]
2022-04-15 16:55:28.197 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 16:55:28.198 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 16:55:28.202 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 16:55:33.445 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 16:55:33.446 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 16:55:33.572 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 16:55:33.580 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/openapi.json
2022-04-15 16:55:39.575 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 16:55:39.669 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 64, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f550d1b0d30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f550de34160>
    └ <uvicorn.server.Server object at 0x7f550c58c9d0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f550de341f0>
    │    │                  └ <uvicorn.server.Server object at 0x7f550c58c9d0>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f550c13db80>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bcc64f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f550c13dc10>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bcc64f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bcc64f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f550c16cc10>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bcc64...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bc...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f550c544520>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f550c16cc10>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bcc64...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bc...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bcc64...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bc...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f550bcaa850>
          └ <fastapi.applications.FastAPI object at 0x7f550c544520>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f550bcb61f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f550bcaa820>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f550bcaa850>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '4372558', 'sec-ch-ua': '" Not A;Brand";v="9...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f550bcb61f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bc...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f550c5fa700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f550bcaa820>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f550bcaa820>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f550bcaa4c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f550bcaa820>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f550c5ee4c0>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f550bcaa4c0>
                     │    │             └ <starlette.requests.Request object at 0x7f550bcc6e80>
                     │    └ <function http_request_logging_middleware at 0x7f550c5faca0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f550bcaa4c0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f550bcc6e80>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f550bcaa4c0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-12' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/si...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f550c132640 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f550bcaa520>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f550bcaa4c0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f550bccb3a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f550bcaa0a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f550bcaa520>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f550bccb3a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bc...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f550c6c9ee0>
          └ <fastapi.routing.APIRoute object at 0x7f550bcaae80>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f550bccb3a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f550bc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f550bca3dc0>
          └ <fastapi.routing.APIRoute object at 0x7f550bcaae80>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f5509b47130>
                     └ <function get_request_handler.<locals>.app at 0x7f550bca3d30>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f550c6c9040>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 150, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'file': <starlette.datastructures.UploadFile object at 0x7f5509b47370>}
                 │                 │         └ <function upload at 0x7f550bca3ca0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f550bcaaeb0>
                 └ <function run_in_threadpool at 0x7f550c8b5ca0>
  File "/usr/local/lib/python3.8/site-packages/starlette/concurrency.py", line 34, in run_in_threadpool
    return await loop.run_in_executor(None, func, *args)
                 │    │                     │      └ (functools.partial(<function upload at 0x7f550bca3ca0>, file=<starlette.datastructures.UploadFile object at 0x7f5509b47370>),)
                 │    │                     └ <built-in method run of Context object at 0x7f550bcccb80>
                 │    └ <method 'run_in_executor' of 'uvloop.loop.Loop' objects>
                 └ <uvloop.Loop running=True closed=False debug=False>
  File "/usr/local/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
             │        │            └ None
             │        └ None
             └ None

  File "/workspace/api.py", line 48, in upload
    return Response(content=centents)
           └ <class 'starlette.responses.Response'>

NameError: name 'centents' is not defined

2022-04-15 16:55:47.470 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 16:55:47.571 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 16:55:47.572 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 16:55:47.573 | INFO     | uvicorn.server:serve:73 - Finished server process [3981]
2022-04-15 16:55:49.644 | INFO     | uvicorn.server:serve:63 - Started server process [4114]
2022-04-15 16:55:49.645 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 16:55:49.646 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 16:55:49.649 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 16:55:51.681 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 16:55:51.773 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 64, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f0418877d30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f04194fb160>
    └ <uvicorn.server.Server object at 0x7f0417c529d0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f04194fb1f0>
    │    │                  └ <uvicorn.server.Server object at 0x7f0417c529d0>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f0417804b80>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f041738d5b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f0417804c10>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f041738d5b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f041738d5b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0417833c10>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f041738d5...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f04173...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f0417c0b520>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0417833c10>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f041738d5...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f04173...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f041738d5...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f04173...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f041736f850>
          └ <fastapi.applications.FastAPI object at 0x7f0417c0b520>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f041737d1f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f04173...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f041736f820>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f041736f850>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '4372558', 'sec-ch-ua': '" Not A;Brand";v="9...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f041737d1f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f04173...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f0417cc1700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f041736f820>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f041736f820>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f04173...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f041736f4c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f041736f820>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f0417cb54c0>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f041736f4c0>
                     │    │             └ <starlette.requests.Request object at 0x7f041738d730>
                     │    └ <function http_request_logging_middleware at 0x7f0417cc1ca0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f041736f4c0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f041738d730>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f041736f4c0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-4' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f041738d8e0 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f04173...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f041736f520>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f041736f4c0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f04173923a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f04173...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f041736f0a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f041736f520>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f04173923a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f04173...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f0417dd0ee0>
          └ <fastapi.routing.APIRoute object at 0x7f041736fe80>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f04173923a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f04173...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f041736adc0>
          └ <fastapi.routing.APIRoute object at 0x7f041736fe80>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f041738da60>
                     └ <function get_request_handler.<locals>.app at 0x7f041736ad30>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f0417dd0040>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 150, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'file': <starlette.datastructures.UploadFile object at 0x7f041738dca0>}
                 │                 │         └ <function upload at 0x7f041736aca0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f041736feb0>
                 └ <function run_in_threadpool at 0x7f0417f7cca0>
  File "/usr/local/lib/python3.8/site-packages/starlette/concurrency.py", line 34, in run_in_threadpool
    return await loop.run_in_executor(None, func, *args)
                 │    │                     │      └ (functools.partial(<function upload at 0x7f041736aca0>, file=<starlette.datastructures.UploadFile object at 0x7f041738dca0>),)
                 │    │                     └ <built-in method run of Context object at 0x7f0415205440>
                 │    └ <method 'run_in_executor' of 'uvloop.loop.Loop' objects>
                 └ <uvloop.Loop running=True closed=False debug=False>
  File "/usr/local/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
             │        │            └ None
             │        └ None
             └ None

  File "/workspace/api.py", line 48, in upload
    return Response(content=contents)
           │                └ <coroutine object UploadFile.read at 0x7f0417394540>
           └ <class 'starlette.responses.Response'>

  File "/usr/local/lib/python3.8/site-packages/starlette/responses.py", line 49, in __init__
    self.body = self.render(content)
    │           │    │      └ <coroutine object UploadFile.read at 0x7f0417394540>
    │           │    └ <function Response.render at 0x7f0417e50040>
    │           └ <starlette.responses.Response object at 0x7f0415207400>
    └ <starlette.responses.Response object at 0x7f0415207400>
  File "/usr/local/lib/python3.8/site-packages/starlette/responses.py", line 57, in render
    return content.encode(self.charset)
           │              │    └ 'utf-8'
           │              └ <starlette.responses.Response object at 0x7f0415207400>
           └ <coroutine object UploadFile.read at 0x7f0417394540>

AttributeError: 'coroutine' object has no attribute 'encode'

2022-04-15 16:56:57.689 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 16:56:57.791 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 16:56:57.792 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 16:56:57.792 | INFO     | uvicorn.server:serve:73 - Finished server process [4114]
2022-04-15 16:57:06.550 | INFO     | uvicorn.server:serve:63 - Started server process [4408]
2022-04-15 16:57:06.551 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 16:57:06.551 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 16:57:06.556 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 16:57:09.649 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 16:57:09.651 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 16:57:09.827 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 16:57:09.835 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/openapi.json
2022-04-15 16:57:17.848 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 16:57:17.947 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:00:59.882 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:00:59.983 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:00:59.984 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:00:59.984 | INFO     | uvicorn.server:serve:73 - Finished server process [4408]
2022-04-15 17:01:01.998 | INFO     | uvicorn.server:serve:63 - Started server process [5197]
2022-04-15 17:01:01.999 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:01:02.001 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:01:02.009 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:01:11.629 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 17:01:11.630 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 17:01:17.300 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/
2022-04-15 17:01:17.306 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/
2022-04-15 17:01:20.000 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 17:01:20.001 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 17:01:20.194 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 17:01:20.204 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/openapi.json
2022-04-15 17:06:23.605 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:06:23.706 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:06:23.707 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:06:23.708 | INFO     | uvicorn.server:serve:73 - Finished server process [5197]
2022-04-15 17:06:26.327 | INFO     | uvicorn.server:serve:63 - Started server process [6261]
2022-04-15 17:06:26.328 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:06:26.329 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:06:26.334 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:06:28.359 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 17:06:28.360 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 17:06:28.538 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 17:06:28.545 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/openapi.json
2022-04-15 17:06:59.746 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:06:59.847 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:06:59.848 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:06:59.849 | INFO     | uvicorn.server:serve:73 - Finished server process [6261]
2022-04-15 17:07:01.630 | INFO     | uvicorn.server:serve:63 - Started server process [6408]
2022-04-15 17:07:01.631 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:07:01.632 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:07:01.637 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:07:03.517 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/
2022-04-15 17:07:03.523 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/
2022-04-15 17:07:05.173 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 17:07:05.174 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 17:07:05.361 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 17:07:05.364 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/openapi.json
2022-04-15 17:07:46.789 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:07:46.890 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:07:46.891 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:07:46.891 | INFO     | uvicorn.server:serve:73 - Finished server process [6408]
2022-04-15 17:07:52.089 | INFO     | uvicorn.server:serve:63 - Started server process [6630]
2022-04-15 17:07:52.090 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:07:52.090 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:07:52.095 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:07:52.816 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 17:07:52.818 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 17:07:52.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 17:07:52.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/openapi.json
2022-04-15 17:07:58.966 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:07:59.073 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 70, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f46a399fd30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f46a4622160>
    └ <uvicorn.server.Server object at 0x7f4686bc1b20>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f46a46221f0>
    │    │                  └ <uvicorn.server.Server object at 0x7f4686bc1b20>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f4686578310>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f4686311dc0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f46865783a0>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f4686311dc0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f4686311dc0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f46867d1fd0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f4686311d...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f46863...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f46867e0550>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f46867d1fd0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f4686311d...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f46863...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f4686311d...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f46863...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f46862f5970>
          └ <fastapi.applications.FastAPI object at 0x7f46867e0550>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f46862f8940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f46863...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f46862f5910>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f46862f5970>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '4372558', 'sec-ch-ua': '" Not A;Brand";v="9...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f46862f8940>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f46863...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f46a2de7700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f46862f5910>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f46862f5910>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f46863...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f46862f54c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f46862f5910>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f46a2ddc4c0>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f46862f54c0>
                     │    │             └ <starlette.requests.Request object at 0x7f4686327280>
                     │    └ <function http_request_logging_middleware at 0x7f46a2de7ca0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f46862f54c0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f4686327280>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f46862f54c0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-12' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/si...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f4686327190 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f46863...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f46862f5610>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f46862f54c0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4686315b80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f46863...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f46862f5220>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f46862f5610>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4686315b80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f46863...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f46a2ef8ee0>
          └ <fastapi.routing.APIRoute object at 0x7f46862f5f70>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4686315b80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f46863...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f46862f8550>
          └ <fastapi.routing.APIRoute object at 0x7f46862f5f70>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f4686327130>
                     └ <function get_request_handler.<locals>.app at 0x7f46862f84c0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f46a2ef8040>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f4686327730>}
                 │         └ <function upload at 0x7f46862f8430>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f46862f5fa0>

  File "/workspace/api.py", line 50, in upload
    writer.write(contents)
    │      │     └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x06\x00\x00\x00\x08\x00\x08\x02\x00\x00\x00o\xb3oa\x00\x00\x00\x01sRGB\x00\xae\...
    │      └ <method 'write' of '_io.TextIOWrapper' objects>
    └ <_io.TextIOWrapper name='temp.png' mode='w+' encoding='UTF-8'>

TypeError: write() argument must be str, not bytes

2022-04-15 17:08:08.200 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:08:08.302 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:08:08.303 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:08:08.303 | INFO     | uvicorn.server:serve:73 - Finished server process [6630]
2022-04-15 17:08:09.953 | INFO     | uvicorn.server:serve:63 - Started server process [6745]
2022-04-15 17:08:09.953 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:08:09.954 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:08:09.959 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:08:11.145 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:08:11.267 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 70, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f95071aad30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f9507e2d160>
    └ <uvicorn.server.Server object at 0x7f94ea3ccb20>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f9507e2d1f0>
    │    │                  └ <uvicorn.server.Server object at 0x7f94ea3ccb20>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f94e9d88310>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b1c730>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f94e9d883a0>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b1c730>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b1c730>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f94e9fdcfd0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b1c7...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f94e9feb550>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f94e9fdcfd0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b1c7...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b1c7...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f94e9b00970>
          └ <fastapi.applications.FastAPI object at 0x7f94e9feb550>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f94e9b03940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f94e9b00910>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f94e9b00970>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '4372558', 'sec-ch-ua': '" Not A;Brand";v="9...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f94e9b03940>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f95065f2700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f94e9b00910>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f94e9b00910>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f94e9b004c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f94e9b00910>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f95065e74c0>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f94e9b004c0>
                     │    │             └ <starlette.requests.Request object at 0x7f94e9b1c8b0>
                     │    └ <function http_request_logging_middleware at 0x7f95065f2ca0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f94e9b004c0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f94e9b1c8b0>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f94e9b004c0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-4' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f94e9b1ca60 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f94e9b00610>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f94e9b004c0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f94e9b20af0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f94e9b00220>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f94e9b00610>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f94e9b20af0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f9506703ee0>
          └ <fastapi.routing.APIRoute object at 0x7f94e9b00f70>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f94e9b20af0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94e9b...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f94e9b03550>
          └ <fastapi.routing.APIRoute object at 0x7f94e9b00f70>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f94e9b1cbe0>
                     └ <function get_request_handler.<locals>.app at 0x7f94e9b034c0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f9506703040>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f94e9b1ce20>}
                 │         └ <function upload at 0x7f94e9b03430>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f94e9b00fa0>

  File "/workspace/api.py", line 54, in upload
    return FileResponse('temp.png')
           └ <class 'starlette.responses.FileResponse'>

  File "/usr/local/lib/python3.8/site-packages/starlette/responses.py", line 251, in __init__
    assert aiofiles is not None, "'aiofiles' must be installed to use FileResponse"
           └ None

AssertionError: 'aiofiles' must be installed to use FileResponse

2022-04-15 17:08:17.513 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:08:17.614 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:08:17.615 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:08:17.616 | INFO     | uvicorn.server:serve:73 - Finished server process [6745]
2022-04-15 17:08:25.366 | INFO     | uvicorn.server:serve:63 - Started server process [6861]
2022-04-15 17:08:25.367 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:08:25.368 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:08:25.371 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:08:27.539 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:08:27.656 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:08:39.017 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:08:39.118 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:08:39.118 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:08:39.119 | INFO     | uvicorn.server:serve:73 - Finished server process [6861]
2022-04-15 17:10:28.920 | INFO     | uvicorn.server:serve:63 - Started server process [7305]
2022-04-15 17:10:28.921 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:10:28.921 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:10:28.925 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:10:32.239 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:10:32.347 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 71, in <module>
    uvicorn.run(
    │       └ <function run at 0x7febd7028d30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7febd7cab160>
    └ <uvicorn.server.Server object at 0x7febba1f9400>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7febd7cab1f0>
    │    │                  └ <uvicorn.server.Server object at 0x7febba1f9400>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7febb9e288b0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb999ef40>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7febb9e28940>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb999ef40>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb999ef40>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7febb9e3f5b0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb999ef...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb99...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7febba21fe20>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7febb9e3f5b0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb999ef...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb99...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb999ef...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb99...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7febb9998100>
          └ <fastapi.applications.FastAPI object at 0x7febba21fe20>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7febb9992ee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb99...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7febb9998130>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7febb9998100>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '4372558', 'sec-ch-ua': '" Not A;Brand";v="9...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7febb9992ee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb99...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7febd6412ca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7febb9998130>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7febb9998130>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb99...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7febba254ee0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7febb9998130>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7febd6482a60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7febba254ee0>
                     │    │             └ <starlette.requests.Request object at 0x7febb982b0d0>
                     │    └ <function http_request_logging_middleware at 0x7febd641c280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7febba254ee0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7febb982b0d0>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7febba254ee0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-4' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7febb982b280 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb99...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7febba254eb0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7febba254ee0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7febb982c0d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb99...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7febb998aa30>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7febba254eb0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7febb982c0d0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb99...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7febd64a74c0>
          └ <fastapi.routing.APIRoute object at 0x7febb99987c0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7febb982c0d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7febb99...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7febb9992af0>
          └ <fastapi.routing.APIRoute object at 0x7febb99987c0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7febb982b400>
                     └ <function get_request_handler.<locals>.app at 0x7febb9992a60>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7febd64965e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7febb982b640>}
                 │         └ <function upload at 0x7febb99929d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7febb99987f0>

  File "/workspace/api.py", line 49, in upload
    nparr = np.fromstring(contents, np.uint8)
                          └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x06\x00\x00\x00\x08\x00\x08\x02\x00\x00\x00o\xb3oa\x00\x00\x00\x01sRGB\x00\xae\...

NameError: name 'np' is not defined

2022-04-15 17:10:40.775 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:10:40.877 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:10:40.878 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:10:40.878 | INFO     | uvicorn.server:serve:73 - Finished server process [7305]
2022-04-15 17:10:43.046 | INFO     | uvicorn.server:serve:63 - Started server process [7397]
2022-04-15 17:10:43.047 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:10:43.048 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:10:43.051 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:10:44.841 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:10:44.930 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 72, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f2bd5042d30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f2bd5cc5160>
    └ <uvicorn.server.Server object at 0x7f2bb8213400>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f2bd5cc51f0>
    │    │                  └ <uvicorn.server.Server object at 0x7f2bb8213400>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f2bb7e538b0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79b7f40>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f2bb7e53940>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79b7f40>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79b7f40>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2bb7e575b0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79b7f...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f2bb8239e20>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2bb7e575b0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79b7f...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79b7f...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2bb79b0130>
          └ <fastapi.applications.FastAPI object at 0x7f2bb8239e20>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2bb79acee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2bb79b0100>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2bb79b0130>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '4372558', 'sec-ch-ua': '" Not A;Brand";v="9...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2bb79acee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f2bd442bca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2bb79b0100>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f2bb79b0100>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2bb826eee0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2bb79b0100>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f2bd449ba60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2bb826eee0>
                     │    │             └ <starlette.requests.Request object at 0x7f2bb78450d0>
                     │    └ <function http_request_logging_middleware at 0x7f2bd4436280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2bb826eee0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f2bb78450d0>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2bb826eee0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-4' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f2bb7845280 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2bb826eeb0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2bb826eee0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2bb78460d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f2bb79a3a60>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2bb826eeb0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2bb78460d0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f2bd44c24c0>
          └ <fastapi.routing.APIRoute object at 0x7f2bb79b0760>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2bb78460d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2bb79...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f2bb79acaf0>
          └ <fastapi.routing.APIRoute object at 0x7f2bb79b0760>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f2bb7845400>
                     └ <function get_request_handler.<locals>.app at 0x7f2bb79aca60>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f2bd44b05e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f2bb7845640>}
                 │         └ <function upload at 0x7f2bb79ac9d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f2bb79b0790>

  File "/workspace/api.py", line 51, in upload
    img_np = cv2.imdecode(nparr, cv2.CV_LOAD_IMAGE_COLOR)
             │   │        │      └ <module 'cv2.cv2' from '/usr/local/lib/python3.8/site-packages/cv2/cv2.cpython-38-x86_64-linux-gnu.so'>
             │   │        └ array([137,  80,  78, ...,  66,  96, 130], dtype=uint8)
             │   └ <built-in function imdecode>
             └ <module 'cv2.cv2' from '/usr/local/lib/python3.8/site-packages/cv2/cv2.cpython-38-x86_64-linux-gnu.so'>

AttributeError: module 'cv2.cv2' has no attribute 'CV_LOAD_IMAGE_COLOR'

2022-04-15 17:11:27.108 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:11:27.210 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:11:27.211 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:11:27.211 | INFO     | uvicorn.server:serve:73 - Finished server process [7397]
2022-04-15 17:11:28.463 | INFO     | uvicorn.server:serve:63 - Started server process [7575]
2022-04-15 17:11:28.464 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:11:28.466 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:11:28.474 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:11:32.351 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:11:32.835 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:12:19.702 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:12:19.804 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:12:19.805 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:12:19.805 | INFO     | uvicorn.server:serve:73 - Finished server process [7575]
2022-04-15 17:12:21.002 | INFO     | uvicorn.server:serve:63 - Started server process [7790]
2022-04-15 17:12:21.003 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:12:21.003 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:12:21.007 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:12:24.190 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:12:24.586 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:13:31.007 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:13:31.108 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:13:31.109 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:13:31.110 | INFO     | uvicorn.server:serve:73 - Finished server process [7790]
2022-04-15 17:13:32.410 | INFO     | uvicorn.server:serve:63 - Started server process [8043]
2022-04-15 17:13:32.411 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:13:32.411 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:13:32.415 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:13:36.354 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:13:36.512 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 77, in <module>
    uvicorn.run(
    │       └ <function run at 0x7fa177745d30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7fa1783c8160>
    └ <uvicorn.server.Server object at 0x7fa15a9163d0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7fa1783c81f0>
    │    │                  └ <uvicorn.server.Server object at 0x7fa15a9163d0>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa15a5468b0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0bfeb0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa15a546940>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0bfeb0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0bfeb0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa15a55b580>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0bfe...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa15a93bdf0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa15a55b580>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0bfe...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0bfe...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa15a0b30d0>
          └ <fastapi.applications.FastAPI object at 0x7fa15a93bdf0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa15a0afee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa15a0b30a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa15a0b30d0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '4372558', 'sec-ch-ua': '" Not A;Brand";v="9...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa15a0afee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fa176b2dca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa15a0b30a0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fa15a0b30a0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa15a971eb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa15a0b30a0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7fa176b9da60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa15a971eb0>
                     │    │             └ <starlette.requests.Request object at 0x7fa159f48070>
                     │    └ <function http_request_logging_middleware at 0x7fa176b38280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa15a971eb0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7fa159f48070>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa15a971eb0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-4' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7fa159f48220 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa15a971e80>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa15a971eb0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa159f490d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa15a0a5a00>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa15a971e80>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa159f490d0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7fa176bc34c0>
          └ <fastapi.routing.APIRoute object at 0x7fa15a0b3700>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa159f490d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa15a0...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa15a0afaf0>
          └ <fastapi.routing.APIRoute object at 0x7fa15a0b3700>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa159f483a0>
                     └ <function get_request_handler.<locals>.app at 0x7fa15a0afa60>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa176bb35e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7fa159f485e0>}
                 │         └ <function upload at 0x7fa15a0af9d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa15a0b3730>

  File "/workspace/api.py", line 53, in upload
    model = torch.hub.load('ultralytics/yolov5', 'yolov5s')

NameError: name 'torch' is not defined

2022-04-15 17:13:45.874 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:13:45.975 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:13:45.976 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:13:45.977 | INFO     | uvicorn.server:serve:73 - Finished server process [8043]
2022-04-15 17:13:47.986 | INFO     | uvicorn.server:serve:63 - Started server process [8147]
2022-04-15 17:13:47.987 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:13:47.988 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:13:47.992 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:13:48.520 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:13:57.548 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 78, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f2e3d173d30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f2e3ddf6160>
    └ <uvicorn.server.Server object at 0x7f2e0da41dc0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f2e3ddf61f0>
    │    │                  └ <uvicorn.server.Server object at 0x7f2e0da41dc0>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f2e0d3e3ee0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d187760>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f2e0d3e3f70>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d187760>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d187760>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2e0d3f0790>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d1877...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d1...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f2e0d15fd90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2e0d3f0790>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d1877...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d1...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d1877...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d1...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2e0d16ca90>
          └ <fastapi.applications.FastAPI object at 0x7f2e0d15fd90>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2e0d174550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d1...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e0d16c970>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2e0d16ca90>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '4372558', 'sec-ch-ua': '" Not A;Brand";v="9...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2e0d174550>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d1...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f2e3c55bca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e0d16c970>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f2e0d16c970>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d1...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e0d16c700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e0d16c970>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f2e3c5cba60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e0d16c700>
                     │    │             └ <starlette.requests.Request object at 0x7f2e0d1878e0>
                     │    └ <function http_request_logging_middleware at 0x7f2e3c566280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e0d16c700>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f2e0d1878e0>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e0d16c700>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-4' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f2e0d187a90 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d1...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2e0d16c760>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e0d16c700>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e0d18c700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d1...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f2e0d16c3d0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2e0d16c760>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e0d18c700>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d1...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f2e3c5f14c0>
          └ <fastapi.routing.APIRoute object at 0x7f2e0d1730d0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e0d18c700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e0d1...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f2e0d174160>
          └ <fastapi.routing.APIRoute object at 0x7f2e0d1730d0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f2e0d187c10>
                     └ <function get_request_handler.<locals>.app at 0x7f2e0d1740d0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 209, in app
    response_data = await serialize_response(
                          └ <function serialize_response at 0x7f2e3c5e1280>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 137, in serialize_response
    return jsonable_encoder(response_content)
           │                └           xmin         ymin         xmax         ymax  confidence  class  \
           │                  0   734.600586  1510.351440  1021.918579  2045.63...
           └ <function jsonable_encoder at 0x7f2e3c5e10d0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/encoders.py", line 142, in jsonable_encoder
    return jsonable_encoder(
           └ <function jsonable_encoder at 0x7f2e3c5e10d0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/encoders.py", line 90, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    └ <function jsonable_encoder at 0x7f2e3c5e10d0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/encoders.py", line 142, in jsonable_encoder
    return jsonable_encoder(
           └ <function jsonable_encoder at 0x7f2e3c5e10d0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/encoders.py", line 90, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    └ <function jsonable_encoder at 0x7f2e3c5e10d0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/encoders.py", line 141, in jsonable_encoder
    raise ValueError(errors)
                     └ [TypeError("'numpy.int64' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]

ValueError: [TypeError("'numpy.int64' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]

2022-04-15 17:15:22.694 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:15:22.795 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:15:22.796 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:15:22.797 | INFO     | uvicorn.server:serve:73 - Finished server process [8147]
2022-04-15 17:15:24.144 | INFO     | uvicorn.server:serve:63 - Started server process [8517]
2022-04-15 17:15:24.145 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:15:24.146 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:15:24.153 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:15:27.366 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:15:30.122 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:16:28.934 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:16:29.035 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:16:29.036 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:16:29.037 | INFO     | uvicorn.server:serve:73 - Finished server process [8517]
2022-04-15 17:16:30.534 | INFO     | uvicorn.server:serve:63 - Started server process [8782]
2022-04-15 17:16:30.534 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:16:30.535 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:16:30.540 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:16:32.231 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:16:34.792 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:17:22.765 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:17:22.866 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:17:22.867 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:17:22.868 | INFO     | uvicorn.server:serve:73 - Finished server process [8782]
2022-04-15 17:17:24.586 | INFO     | uvicorn.server:serve:63 - Started server process [9002]
2022-04-15 17:17:24.587 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:17:24.589 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:17:24.592 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:17:25.396 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:17:27.964 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 83, in <module>
    uvicorn.run(
    │       └ <function run at 0x7fc060382d30>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7fc061005160>
    └ <uvicorn.server.Server object at 0x7fc030c4fdc0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7fc0610051f0>
    │    │                  └ <uvicorn.server.Server object at 0x7fc030c4fdc0>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc0305f2ee0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc030396760>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc0305f2f70>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc030396760>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc030396760>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc0305f7790>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc0303967...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc0303...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc03036dd90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc0305f7790>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc0303967...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc0303...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc0303967...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc0303...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc03037aa90>
          └ <fastapi.applications.FastAPI object at 0x7fc03036dd90>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc030383550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc0303...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc03037a970>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc03037aa90>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '4372558', 'sec-ch-ua': '" Not A;Brand";v="9...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc030383550>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc0303...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fc05f76aca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc03037a970>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fc03037a970>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc0303...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc03037a700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc03037a970>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7fc05f7daa60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc03037a700>
                     │    │             └ <starlette.requests.Request object at 0x7fc030396910>
                     │    └ <function http_request_logging_middleware at 0x7fc05f775280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc03037a700>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7fc030396910>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc03037a700>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-4' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7fc030396ac0 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc0303...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc03037a760>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc03037a700>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc03039a700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc0303...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc03037a3d0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc03037a760>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc03039a700>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc0303...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7fc05f8004c0>
          └ <fastapi.routing.APIRoute object at 0x7fc030382100>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc03039a700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fc0303...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc030383160>
          └ <fastapi.routing.APIRoute object at 0x7fc030382100>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc030396c10>
                     └ <function get_request_handler.<locals>.app at 0x7fc0303830d0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 209, in app
    response_data = await serialize_response(
                          └ <function serialize_response at 0x7fc05f7f0280>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 137, in serialize_response
    return jsonable_encoder(response_content)
           │                └ {'preds': <zip object at 0x7fc00109c9c0>}
           └ <function jsonable_encoder at 0x7fc05f7f00d0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/encoders.py", line 90, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    └ <function jsonable_encoder at 0x7fc05f7f00d0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/encoders.py", line 141, in jsonable_encoder
    raise ValueError(errors)
                     └ [ValueError('dictionary update sequence element #0 has length 4; 2 is required'), TypeError('vars() argument must have __dict...

ValueError: [ValueError('dictionary update sequence element #0 has length 4; 2 is required'), TypeError('vars() argument must have __dict__ attribute')]

2022-04-15 17:18:04.817 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:18:04.919 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:18:04.920 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:18:04.921 | INFO     | uvicorn.server:serve:73 - Finished server process [9002]
2022-04-15 17:18:13.272 | INFO     | uvicorn.server:serve:63 - Started server process [9247]
2022-04-15 17:18:13.273 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:18:13.274 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:18:13.277 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:18:14.962 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:18:17.577 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:18:56.519 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:18:56.620 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:18:56.621 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:18:56.622 | INFO     | uvicorn.server:serve:73 - Finished server process [9247]
2022-04-15 17:18:58.253 | INFO     | uvicorn.server:serve:63 - Started server process [9448]
2022-04-15 17:18:58.254 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:18:58.254 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:18:58.258 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:18:59.522 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:19:02.097 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:21:57.136 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:21:57.238 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:21:57.238 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:21:57.239 | INFO     | uvicorn.server:serve:73 - Finished server process [9448]
2022-04-15 17:22:44.358 | INFO     | uvicorn.server:serve:63 - Started server process [10261]
2022-04-15 17:22:44.359 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:22:44.359 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:22:44.363 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:22:48.286 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:22:51.013 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:23:15.501 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:23:15.603 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:23:15.604 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:23:15.605 | INFO     | uvicorn.server:serve:73 - Finished server process [10261]
2022-04-15 17:23:17.119 | INFO     | uvicorn.server:serve:63 - Started server process [10424]
2022-04-15 17:23:17.120 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:23:17.121 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:23:17.124 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:23:18.045 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:23:20.796 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:23:51.610 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:23:51.712 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:23:51.713 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:23:51.714 | INFO     | uvicorn.server:serve:73 - Finished server process [10424]
2022-04-15 17:23:55.954 | INFO     | uvicorn.server:serve:63 - Started server process [10594]
2022-04-15 17:23:55.955 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:23:55.956 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:23:55.957 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:23:59.199 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:23:59.648 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:24:59.866 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:25:00.087 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:27:39.264 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:27:39.752 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:28:07.045 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:28:07.236 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:35:49.900 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/image
2022-04-15 17:35:49.901 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 405 for http://localhost:4242/image
2022-04-15 17:36:01.117 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/
2022-04-15 17:36:01.123 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/
2022-04-15 17:36:04.502 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/image
2022-04-15 17:36:04.502 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 405 for http://localhost:4242/image
2022-04-15 17:40:05.333 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 17:40:05.335 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 17:40:05.482 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 17:40:05.488 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/openapi.json
2022-04-15 17:40:58.619 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:40:58.719 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:40:58.720 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:40:58.721 | INFO     | uvicorn.server:serve:73 - Finished server process [10594]
2022-04-15 17:47:28.832 | INFO     | uvicorn.server:serve:63 - Started server process [15153]
2022-04-15 17:47:28.833 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:47:28.834 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:47:28.838 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:47:33.275 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/
2022-04-15 17:47:33.283 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/
2022-04-15 17:47:34.947 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 17:47:34.949 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 17:47:35.138 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 17:47:35.144 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/openapi.json
2022-04-15 17:50:30.960 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:50:31.061 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:50:31.062 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:50:31.063 | INFO     | uvicorn.server:serve:73 - Finished server process [15153]
2022-04-15 17:51:03.457 | INFO     | uvicorn.server:serve:63 - Started server process [15942]
2022-04-15 17:51:03.458 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:51:03.459 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:51:03.460 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:51:12.591 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/
2022-04-15 17:51:12.598 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/
2022-04-15 17:51:13.944 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 17:51:13.945 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 17:51:14.069 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 17:51:14.077 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/openapi.json
2022-04-15 17:51:19.429 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:51:19.432 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 102, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f18526c29d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f1853346dc0>
    └ <uvicorn.server.Server object at 0x7f17fd420640>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f1853346e50>
    │    │                  └ <uvicorn.server.Server object at 0x7f17fd420640>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f17fd416670>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc08c280>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f17fd416700>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc08c280>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc08c280>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f17fc186b50>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc08c2...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc0...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f17fc1363a0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f17fc186b50>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc08c2...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc0...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc08c2...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc0...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f17fd029c70>
          └ <fastapi.applications.FastAPI object at 0x7f17fc1363a0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f17fd460790>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc0...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f17fd029a90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f17fd029c70>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f17fd460790>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc0...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f17fd4205b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f17fd029a90>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f1851b1ba60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f17fd4205b0>
                     │    │             └ <starlette.requests.Request object at 0x7f17fc08c340>
                     │    └ <function http_request_logging_middleware at 0x7f1851ab8280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f17fd4205b0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f17fc08c340>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f17fd4205b0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-16' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/si...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f17fc0f45b0 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc0...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f17fd420610>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f17fd4205b0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f17fc1038b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc0...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f17fc122d00>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f17fd420610>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f17fc1038b0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc0...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f1851b434c0>
          └ <fastapi.routing.APIRoute object at 0x7f17fc08cbb0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f17fc1038b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f17fc0...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f17fc1031f0>
          └ <fastapi.routing.APIRoute object at 0x7f17fc08cbb0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f17fc0f4f40>
                     └ <function get_request_handler.<locals>.app at 0x7f17fc103160>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f1851b335e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 150, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'request': <starlette.requests.Request object at 0x7f17fc0f4f40>}
                 │                 │         └ <function index at 0x7f17fc1030d0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f17fc08cbe0>
                 └ <function run_in_threadpool at 0x7f1851dcaca0>
  File "/usr/local/lib/python3.8/site-packages/starlette/concurrency.py", line 34, in run_in_threadpool
    return await loop.run_in_executor(None, func, *args)
                 │    │                     │      └ (functools.partial(<function index at 0x7f17fc1030d0>, request=<starlette.requests.Request object at 0x7f17fc0f4f40>),)
                 │    │                     └ <built-in method run of Context object at 0x7f17fd442440>
                 │    └ <method 'run_in_executor' of 'uvloop.loop.Loop' objects>
                 └ <uvloop.Loop running=True closed=False debug=False>
  File "/usr/local/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
             │        │            └ None
             │        └ None
             └ None

  File "/workspace/api.py", line 52, in index
    return templates.TemplateResponse("item.html", {"request": request})
           │         │                                         └ <starlette.requests.Request object at 0x7f17fc0f4f40>
           │         └ <function Jinja2Templates.TemplateResponse at 0x7f1822c513a0>
           └ <starlette.templating.Jinja2Templates object at 0x7f17fc0f4130>

  File "/usr/local/lib/python3.8/site-packages/starlette/templating.py", line 80, in TemplateResponse
    template = self.get_template(name)
               │    │            └ 'item.html'
               │    └ <function Jinja2Templates.get_template at 0x7f1822c51310>
               └ <starlette.templating.Jinja2Templates object at 0x7f17fc0f4130>
  File "/usr/local/lib/python3.8/site-packages/starlette/templating.py", line 67, in get_template
    return self.env.get_template(name)
           │    │   │            └ 'item.html'
           │    │   └ <function Environment.get_template at 0x7f1822c3e790>
           │    └ <jinja2.environment.Environment object at 0x7f17fc0d7ca0>
           └ <starlette.templating.Jinja2Templates object at 0x7f17fc0f4130>
  File "/usr/local/lib/python3.8/site-packages/jinja2/environment.py", line 997, in get_template
    return self._load_template(name, globals)
           │    │              │     └ None
           │    │              └ 'item.html'
           │    └ <function Environment._load_template at 0x7f1822c3e700>
           └ <jinja2.environment.Environment object at 0x7f17fc0d7ca0>
  File "/usr/local/lib/python3.8/site-packages/jinja2/environment.py", line 958, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               │    │      │    │     │     │    │            └ None
               │    │      │    │     │     │    └ <function Environment.make_globals at 0x7f1822c3e9d0>
               │    │      │    │     │     └ <jinja2.environment.Environment object at 0x7f17fc0d7ca0>
               │    │      │    │     └ 'item.html'
               │    │      │    └ <jinja2.environment.Environment object at 0x7f17fc0d7ca0>
               │    │      └ <function BaseLoader.load at 0x7f1822c494c0>
               │    └ <jinja2.loaders.FileSystemLoader object at 0x7f17fc0d7490>
               └ <jinja2.environment.Environment object at 0x7f17fc0d7ca0>
  File "/usr/local/lib/python3.8/site-packages/jinja2/loaders.py", line 125, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 │    │          │            └ 'item.html'
                                 │    │          └ <jinja2.environment.Environment object at 0x7f17fc0d7ca0>
                                 │    └ <function FileSystemLoader.get_source at 0x7f1822c495e0>
                                 └ <jinja2.loaders.FileSystemLoader object at 0x7f17fc0d7490>
  File "/usr/local/lib/python3.8/site-packages/jinja2/loaders.py", line 214, in get_source
    raise TemplateNotFound(template)
          │                └ 'item.html'
          └ <class 'jinja2.exceptions.TemplateNotFound'>

jinja2.exceptions.TemplateNotFound: item.html

2022-04-15 17:51:29.653 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:51:29.755 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:51:29.756 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:51:29.757 | INFO     | uvicorn.server:serve:73 - Finished server process [15942]
2022-04-15 17:51:33.867 | INFO     | uvicorn.server:serve:63 - Started server process [16127]
2022-04-15 17:51:33.868 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:51:33.869 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:51:33.871 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:51:38.627 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:51:38.640 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:52:38.930 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:52:39.031 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:52:39.032 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:52:39.033 | INFO     | uvicorn.server:serve:73 - Finished server process [16127]
2022-04-15 17:52:43.809 | INFO     | uvicorn.server:serve:63 - Started server process [16404]
2022-04-15 17:52:43.810 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:52:43.810 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:52:43.812 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:52:44.193 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:52:44.201 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:52:44.211 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:52:44.212 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:52:47.287 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:52:47.292 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:52:47.832 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:52:47.836 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:53:05.986 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:53:06.087 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:53:06.088 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:53:06.089 | INFO     | uvicorn.server:serve:73 - Finished server process [16404]
2022-04-15 17:53:10.882 | INFO     | uvicorn.server:serve:63 - Started server process [16545]
2022-04-15 17:53:10.883 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:53:10.885 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:53:10.890 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:53:11.062 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:53:11.073 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:53:11.632 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:53:11.635 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:53:11.836 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:53:11.839 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:53:12.055 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:53:12.058 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:53:12.702 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:53:12.718 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 422 for http://localhost:4242/image
2022-04-15 17:53:12.719 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:53:12.723 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 422 for http://localhost:4242/image
2022-04-15 17:53:43.599 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:53:43.608 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:53:53.679 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:53:53.863 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:54:08.141 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:54:08.144 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:54:11.482 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:54:11.653 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:54:25.791 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:54:25.968 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:54:39.709 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:54:39.934 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:54:59.609 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:54:59.769 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:55:15.201 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:55:15.362 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:57:26.836 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:57:26.938 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:57:26.939 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:57:26.940 | INFO     | uvicorn.server:serve:73 - Finished server process [16545]
2022-04-15 17:57:31.504 | INFO     | uvicorn.server:serve:63 - Started server process [17599]
2022-04-15 17:57:31.505 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:57:31.506 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:57:31.507 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:57:31.861 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:57:31.871 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:57:36.497 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:57:36.671 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:58:00.395 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:58:00.562 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:58:03.005 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:58:03.013 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:58:03.034 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/image
2022-04-15 17:58:03.035 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 405 for http://localhost:4242/image
2022-04-15 17:58:07.785 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 17:58:07.886 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 17:58:07.888 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 17:58:07.888 | INFO     | uvicorn.server:serve:73 - Finished server process [17599]
2022-04-15 17:58:12.221 | INFO     | uvicorn.server:serve:63 - Started server process [17813]
2022-04-15 17:58:12.223 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 17:58:12.223 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 17:58:12.225 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 17:58:17.331 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 17:58:17.520 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 17:58:23.380 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-15 17:58:23.390 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-15 17:58:23.414 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/image
2022-04-15 17:58:23.416 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 405 for http://localhost:4242/image
2022-04-15 18:01:56.750 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 18:01:56.989 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 18:02:05.531 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/image
2022-04-15 18:02:05.533 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 405 for http://localhost:4242/image
2022-04-15 18:02:10.959 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 18:02:11.170 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 18:02:13.192 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/image
2022-04-15 18:02:13.195 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 405 for http://localhost:4242/image
2022-04-15 18:02:26.409 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 18:02:26.618 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 18:02:32.355 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/image
2022-04-15 18:02:32.356 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 405 for http://localhost:4242/image
2022-04-15 18:02:36.728 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 18:02:36.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 18:02:46.740 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/image
2022-04-15 18:02:46.742 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 405 for http://localhost:4242/image
2022-04-15 18:02:59.166 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 18:02:59.372 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-15 18:03:02.395 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/image
2022-04-15 18:03:02.397 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 405 for http://localhost:4242/image
2022-04-15 18:05:43.561 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 18:05:43.663 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 18:05:43.664 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 18:05:43.664 | INFO     | uvicorn.server:serve:73 - Finished server process [17813]
2022-04-15 18:05:48.370 | INFO     | uvicorn.server:serve:63 - Started server process [19459]
2022-04-15 18:05:48.371 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 18:05:48.371 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 18:05:48.374 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 18:05:48.430 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 18:05:48.431 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 18:05:48.528 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 18:05:48.535 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/openapi.json
2022-04-15 18:06:11.595 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-15 18:06:11.597 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 105, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f95f7ce39d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f95f8966dc0>
    └ <uvicorn.server.Server object at 0x7f95a2a3e730>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f95f8966e50>
    │    │                  └ <uvicorn.server.Server object at 0x7f95a2a3e730>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f95a2a27670>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b76a3a0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f95a2a27700>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b76a3a0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b76a3a0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f95a00b5c40>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b76a3...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b7...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f95a00661f0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f95a00b5c40>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b76a3...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b7...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b76a3...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b7...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f95a2937790>
          └ <fastapi.applications.FastAPI object at 0x7f95a00661f0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f95a2a73790>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b7...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f95a2937e80>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f95a2937790>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '267', 'sec-ch-ua': '" Not A;Brand";v="99", ...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f95a2a73790>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b7...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f95f70cbca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f95a2937e80>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f95a2937e80>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b7...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f95a2a3e6a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f95a2937e80>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f95f713ba60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f95a2a3e6a0>
                     │    │             └ <starlette.requests.Request object at 0x7f959b76a280>
                     │    └ <function http_request_logging_middleware at 0x7f95f70d9280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f95a2a3e6a0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f959b76a280>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f95a2a3e6a0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-12' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/si...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f959b76a610 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b7...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f95a2a3e700>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f95a2a3e6a0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f95a26d18b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b7...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f95a00668e0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f95a2a3e700>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f95a26d18b0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b7...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f95f71624c0>
          └ <fastapi.routing.APIRoute object at 0x7f95a26d2070>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f95a26d18b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f959b7...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f95a26d13a0>
          └ <fastapi.routing.APIRoute object at 0x7f95a26d2070>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f959b76a130>
                     └ <function get_request_handler.<locals>.app at 0x7f95a26d1310>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f95f71525e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': 'C:\\Users\\Gudik\\Desktop\\Hejsa.png', 'allowed_names': ['']}
                 │         └ <function upload at 0x7f95a26d1280>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f95a26d20a0>

  File "/workspace/api.py", line 58, in upload
    contents = await file.read()
                     └ 'C:\\Users\\Gudik\\Desktop\\Hejsa.png'

AttributeError: 'str' object has no attribute 'read'

2022-04-15 18:06:50.385 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 18:06:50.487 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 18:06:50.488 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 18:06:50.488 | INFO     | uvicorn.server:serve:73 - Finished server process [19459]
2022-04-15 18:06:54.726 | INFO     | uvicorn.server:serve:63 - Started server process [19756]
2022-04-15 18:06:54.726 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 18:06:54.727 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 18:06:54.729 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 18:06:54.980 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/docs
2022-04-15 18:06:54.981 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/docs
2022-04-15 18:06:55.109 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/openapi.json
2022-04-15 18:06:55.124 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/openapi.json
2022-04-15 18:07:04.507 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:07:04.559 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:07:10.336 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:07:10.540 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:07:17.891 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:07:17.903 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:08:36.644 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 18:08:36.746 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 18:08:36.747 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 18:08:36.747 | INFO     | uvicorn.server:serve:73 - Finished server process [19756]
2022-04-15 18:08:41.632 | INFO     | uvicorn.server:serve:63 - Started server process [20179]
2022-04-15 18:08:41.633 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 18:08:41.634 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 18:08:41.636 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 18:08:43.507 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:08:43.711 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:08:49.838 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:08:50.022 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:08:54.333 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:08:54.523 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:09:04.823 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:09:05.022 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:09:18.431 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:09:18.630 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:09:21.050 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:09:21.227 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:09:36.380 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 18:09:36.481 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 18:09:36.482 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 18:09:36.482 | INFO     | uvicorn.server:serve:73 - Finished server process [20179]
2022-04-15 18:09:40.713 | INFO     | uvicorn.server:serve:63 - Started server process [20507]
2022-04-15 18:09:40.714 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 18:09:40.715 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 18:09:40.718 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 18:09:45.040 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:09:45.241 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:09:54.022 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:09:54.246 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:10:00.209 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:10:00.394 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:10:16.746 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 18:10:16.848 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 18:10:16.849 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 18:10:16.850 | INFO     | uvicorn.server:serve:73 - Finished server process [20507]
2022-04-15 18:10:21.420 | INFO     | uvicorn.server:serve:63 - Started server process [20736]
2022-04-15 18:10:21.421 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 18:10:21.422 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 18:10:21.423 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 18:10:22.701 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:10:22.895 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:14:51.339 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 18:14:51.440 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 18:14:51.441 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 18:14:51.442 | INFO     | uvicorn.server:serve:73 - Finished server process [20736]
2022-04-15 18:15:51.868 | INFO     | uvicorn.server:serve:63 - Started server process [21882]
2022-04-15 18:15:51.869 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 18:15:51.870 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 18:15:51.871 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 18:16:03.237 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:16:03.249 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 146, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f724a4709d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f724b0f3dc0>
    └ <uvicorn.server.Server object at 0x7f71f51d5a30>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f724b0f3e50>
    │    │                  └ <uvicorn.server.Server object at 0x7f71f51d5a30>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f71f51c3940>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e685b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f71f51c39d0>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e685b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e685b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f71f6a9ffd0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e685...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f71f40ea7c0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f71f6a9ffd0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e685...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e685...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f71f51f2eb0>
          └ <fastapi.applications.FastAPI object at 0x7f71f40ea7c0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f71f4e65c10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f71f51f2af0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f71f51f2eb0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '181538', 'sec-ch-ua': '" Not A;Brand";v="99...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f71f4e65c10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f724985cca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f71f51f2af0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f71f51f2af0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f71f51d5970>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f71f51f2af0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f72498cca60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f71f51d5970>
                     │    │             └ <starlette.requests.Request object at 0x7f71f4e68730>
                     │    └ <function http_request_logging_middleware at 0x7f7249867280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f71f51d5970>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f71f4e68730>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f71f51d5970>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-4' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f71f4e688e0 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f71f51d59d0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f71f51d5970>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f71f4e65d30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f71f40ea160>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f71f51d59d0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f71f4e65d30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f72498f14c0>
          └ <fastapi.routing.APIRoute object at 0x7f71f4e66730>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f71f4e65d30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f71f4e...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f71f4e65820>
          └ <fastapi.routing.APIRoute object at 0x7f71f4e66730>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f71f4e68a60>
                     └ <function get_request_handler.<locals>.app at 0x7f71f4e65790>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f72498e05e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f71f4e68ca0>, 'allowed_names': ['person,dog']}
                 │         └ <function upload at 0x7f71f4e65700>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f71f4e66760>

  File "/workspace/api.py", line 101, in upload
    classes.append(class_names[name])
    │       │      │           └ 'person,dog'
    │       │      └ {'person': 0, 'bicycle': 1, 'car': 2, 'motorcycle': 3, 'airplane': 4, 'bus': 5, 'train': 6, 'truck': 7, 'boat': 8, 'traffic l...
    │       └ <method 'append' of 'list' objects>
    └ []

KeyError: 'person,dog'

2022-04-15 18:16:30.306 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 18:16:30.408 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 18:16:30.409 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 18:16:30.409 | INFO     | uvicorn.server:serve:73 - Finished server process [21882]
2022-04-15 18:16:34.802 | INFO     | uvicorn.server:serve:63 - Started server process [22104]
2022-04-15 18:16:34.803 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 18:16:34.804 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 18:16:34.808 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 18:16:47.214 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:16:47.226 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 146, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f60330119d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f6033c94dc0>
    └ <uvicorn.server.Server object at 0x7f5fddd765b0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f6033c94e50>
    │    │                  └ <uvicorn.server.Server object at 0x7f5fddd765b0>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f5fddd65940>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda04130>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f5fddd659d0>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda04130>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda04130>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5fdf646190>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda041...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f5fd6b5fdf0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5fdf646190>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda041...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda041...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5fdd9f6040>
          └ <fastapi.applications.FastAPI object at 0x7f5fd6b5fdf0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5fdda01c10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5fdd9f6ee0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5fdd9f6040>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '181538', 'sec-ch-ua': '" Not A;Brand";v="99...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5fdda01c10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f60323fdca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5fdd9f6ee0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f5fdd9f6ee0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5fddd76520>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5fdd9f6ee0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f603246ba60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5fddd76520>
                     │    │             └ <starlette.requests.Request object at 0x7f5fdda042b0>
                     │    └ <function http_request_logging_middleware at 0x7f6032408280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5fddd76520>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f5fdda042b0>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5fddd76520>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-4' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f5fdda04460 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5fddd76580>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5fddd76520>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5fdda01d30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f5fd6b5f5e0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5fddd76580>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5fdda01d30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f60324924c0>
          └ <fastapi.routing.APIRoute object at 0x7f5fdda022b0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5fdda01d30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f5fdda...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f5fdda01820>
          └ <fastapi.routing.APIRoute object at 0x7f5fdda022b0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f5fdda045e0>
                     └ <function get_request_handler.<locals>.app at 0x7f5fdda01790>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f60324825e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f5fdda04820>, 'allowed_names': ['person,dog']}
                 │         └ <function upload at 0x7f5fdda01700>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f5fdda022e0>

  File "/workspace/api.py", line 101, in upload
    classes.append(class_names[name])
    │       │      │           └ 'person,dog'
    │       │      └ {'person': 0, 'bicycle': 1, 'car': 2, 'motorcycle': 3, 'airplane': 4, 'bus': 5, 'train': 6, 'truck': 7, 'boat': 8, 'traffic l...
    │       └ <method 'append' of 'list' objects>
    └ []

KeyError: 'person,dog'

2022-04-15 18:17:10.442 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 18:17:10.544 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 18:17:10.545 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 18:17:10.545 | INFO     | uvicorn.server:serve:73 - Finished server process [22104]
2022-04-15 18:17:15.040 | INFO     | uvicorn.server:serve:63 - Started server process [22296]
2022-04-15 18:17:15.041 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 18:17:15.042 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 18:17:15.043 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 18:17:15.340 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:17:15.401 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 147, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f9547b689d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f95487ecdc0>
    └ <uvicorn.server.Server object at 0x7f94f28d61c0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f95487ece50>
    │    │                  └ <uvicorn.server.Server object at 0x7f94f28d61c0>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f94f28b9940>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f2562d00>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f94f28b99d0>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f2562d00>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f2562d00>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f94f27af130>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f2562d...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f25...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f94f0088e50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f94f27af130>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f2562d...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f25...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f2562d...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f25...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f94f27d9280>
          └ <fastapi.applications.FastAPI object at 0x7f94f0088e50>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f94f255fc10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f25...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f94f27d98e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f94f27d9280>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '181538', 'sec-ch-ua': '" Not A;Brand";v="99...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f94f255fc10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f25...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f9546f55ca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f94f27d98e0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f94f27d98e0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f25...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f94f28c6670>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f94f27d98e0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f9546fc5a60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f94f28c6670>
                     │    │             └ <starlette.requests.Request object at 0x7f94f2562e80>
                     │    └ <function http_request_logging_middleware at 0x7f9546f60280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f94f28c6670>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f94f2562e80>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f94f28c6670>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-4' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f94f2563070 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f25...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f94f28c65e0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f94f28c6670>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f94f255fd30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f25...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f94f00edac0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f94f28c65e0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f94f255fd30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f25...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f9546fea4c0>
          └ <fastapi.routing.APIRoute object at 0x7f94f0048e80>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f94f255fd30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f94f25...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f94f255f820>
          └ <fastapi.routing.APIRoute object at 0x7f94f0048e80>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f94f25631f0>
                     └ <function get_request_handler.<locals>.app at 0x7f94f255f790>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f9546fd95e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f94f2563430>, 'allowed_names': ['person,dog']}
                 │         └ <function upload at 0x7f94f255f700>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f94f0048eb0>

  File "/workspace/api.py", line 102, in upload
    classes.append(class_names[name])
    │       │      │           └ 'person,dog'
    │       │      └ {'person': 0, 'bicycle': 1, 'car': 2, 'motorcycle': 3, 'airplane': 4, 'bus': 5, 'train': 6, 'truck': 7, 'boat': 8, 'traffic l...
    │       └ <method 'append' of 'list' objects>
    └ []

KeyError: 'person,dog'

2022-04-15 18:17:46.254 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 18:17:46.355 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 18:17:46.356 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 18:17:46.357 | INFO     | uvicorn.server:serve:73 - Finished server process [22296]
2022-04-15 18:17:50.543 | INFO     | uvicorn.server:serve:63 - Started server process [22465]
2022-04-15 18:17:50.544 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 18:17:50.544 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 18:17:50.547 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 18:17:50.805 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:17:50.817 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 147, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f1b4f00e9d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f1b4fc93dc0>
    └ <uvicorn.server.Server object at 0x7f1af9d5b700>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f1b4fc93e50>
    │    │                  └ <uvicorn.server.Server object at 0x7f1af9d5b700>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f1af9d42940>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99ee280>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f1af9d429d0>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99ee280>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99ee280>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1af9d96460>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99ee2...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f1af2b612e0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1af9d96460>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99ee2...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99ee2...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1af9d8dd30>
          └ <fastapi.applications.FastAPI object at 0x7f1af2b612e0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1af99ecc10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1af9d8db20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1af9d8dd30>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '181538', 'sec-ch-ua': '" Not A;Brand";v="99...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1af99ecc10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f1b4e3fbca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1af9d8db20>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f1af9d8db20>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1af9d5b640>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1af9d8db20>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f1b4e469a60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1af9d5b640>
                     │    │             └ <starlette.requests.Request object at 0x7f1af99ee400>
                     │    └ <function http_request_logging_middleware at 0x7f1b4e407280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1af9d5b640>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f1af99ee400>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1af9d5b640>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-4' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f1af99ee5b0 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1af9d5b6a0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1af9d5b640>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1af99ecd30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f1af2b47c40>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1af9d5b6a0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1af99ecd30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f1b4e4904c0>
          └ <fastapi.routing.APIRoute object at 0x7f1af9d48400>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1af99ecd30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f1af99...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f1af99ec820>
          └ <fastapi.routing.APIRoute object at 0x7f1af9d48400>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f1af99ee730>
                     └ <function get_request_handler.<locals>.app at 0x7f1af99ec790>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f1b4e47e5e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f1af99ee970>, 'allowed_names': ['person,dog']}
                 │         └ <function upload at 0x7f1af99ec700>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f1af9d48430>

  File "/workspace/api.py", line 100, in upload
    names = allowed_names.split(',')
            └ ['person,dog']

AttributeError: 'list' object has no attribute 'split'

2022-04-15 18:18:07.408 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 18:18:07.510 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 18:18:07.511 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 18:18:07.512 | INFO     | uvicorn.server:serve:73 - Finished server process [22465]
2022-04-15 18:18:11.654 | INFO     | uvicorn.server:serve:63 - Started server process [22573]
2022-04-15 18:18:11.656 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 18:18:11.658 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 18:18:11.660 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 18:18:13.097 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:18:13.109 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 148, in <module>
    uvicorn.run(
    │       └ <function run at 0x7fa66dd6e9d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7fa66e9f2dc0>
    └ <uvicorn.server.Server object at 0x7fa618ad9640>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7fa66e9f2e50>
    │    │                  └ <uvicorn.server.Server object at 0x7fa618ad9640>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa61a36b940>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa61876b1c0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa61a36b9d0>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa61876b1c0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa61876b1c0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa61a3aa220>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa61876b1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa6187...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa61186f670>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa61a3aa220>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa61876b1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa6187...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa61876b1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa6187...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa618b02be0>
          └ <fastapi.applications.FastAPI object at 0x7fa61186f670>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa61876ac10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa6187...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa618b02a60>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa618b02be0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '181538', 'sec-ch-ua': '" Not A;Brand";v="99...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa61876ac10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa6187...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fa66d15bca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa618b02a60>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fa618b02a60>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa6187...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa618ad95b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa618b02a60>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7fa66d1cba60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa618ad95b0>
                     │    │             └ <starlette.requests.Request object at 0x7fa61876b340>
                     │    └ <function http_request_logging_middleware at 0x7fa66d166280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa618ad95b0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7fa61876b340>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa618ad95b0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-4' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7fa61876b4f0 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa6187...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa618ad9610>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa618ad95b0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa61876ad30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa6187...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa61802bb80>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa618ad9610>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa61876ad30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa6187...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7fa66d1f04c0>
          └ <fastapi.routing.APIRoute object at 0x7fa618769340>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa61876ad30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7fa6187...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa61876a820>
          └ <fastapi.routing.APIRoute object at 0x7fa618769340>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa61876b670>
                     └ <function get_request_handler.<locals>.app at 0x7fa61876a790>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa66d1de5e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7fa61876b8b0>, 'allowed_names': ['person,dog']}
                 │         └ <function upload at 0x7fa61876a700>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa618769370>

  File "/workspace/api.py", line 102, in upload
    for name in names:

UnboundLocalError: local variable 'names' referenced before assignment

2022-04-15 18:18:41.267 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 18:18:41.369 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 18:18:41.370 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 18:18:41.371 | INFO     | uvicorn.server:serve:73 - Finished server process [22573]
2022-04-15 18:18:45.993 | INFO     | uvicorn.server:serve:63 - Started server process [22737]
2022-04-15 18:18:45.994 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 18:18:45.995 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 18:18:45.996 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 18:18:47.517 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:18:47.580 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 147, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f640ea359d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f640f6b9dc0>
    └ <uvicorn.server.Server object at 0x7f63b9781cd0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f640f6b9e50>
    │    │                  └ <uvicorn.server.Server object at 0x7f63b9781cd0>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f63b9763940>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b9414850>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f63b97639d0>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b9414850>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b9414850>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f63bb0478b0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b94148...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b94...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f63b806e250>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f63bb0478b0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b94148...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b94...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b94148...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b94...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f63b97a2f40>
          └ <fastapi.applications.FastAPI object at 0x7f63b806e250>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f63b9410c10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b94...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f63b80bbe20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f63b97a2f40>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '181538', 'sec-ch-ua': '" Not A;Brand";v="99...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f63b9410c10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b94...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f640de22ca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f63b80bbe20>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f63b80bbe20>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b94...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f63b9781c10>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f63b80bbe20>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f640de92a60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f63b9781c10>
                     │    │             └ <starlette.requests.Request object at 0x7f63b94149d0>
                     │    └ <function http_request_logging_middleware at 0x7f640de2d280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f63b9781c10>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f63b94149d0>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f63b9781c10>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-4' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f63b9414b80 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b94...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f63b9781c70>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f63b9781c10>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f63b9410d30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b94...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f63b806ed00>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f63b9781c70>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f63b9410d30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b94...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f640deb74c0>
          └ <fastapi.routing.APIRoute object at 0x7f63b94119d0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f63b9410d30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f63b94...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f63b9410820>
          └ <fastapi.routing.APIRoute object at 0x7f63b94119d0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f63b9414d00>
                     └ <function get_request_handler.<locals>.app at 0x7f63b9410790>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f640dea65e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f63b9414f40>, 'allowed_names': ['person,dog']}
                 │         └ <function upload at 0x7f63b9410700>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f63b9411a00>

  File "/workspace/api.py", line 100, in upload
    logger.debug(allowed_names)
                 └ ['person,dog']

NameError: name 'logger' is not defined

2022-04-15 18:19:35.983 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 18:19:36.085 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 18:19:36.086 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 18:19:36.086 | INFO     | uvicorn.server:serve:73 - Finished server process [22737]
2022-04-15 18:19:40.583 | INFO     | uvicorn.server:serve:63 - Started server process [22962]
2022-04-15 18:19:40.584 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 18:19:40.585 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 18:19:40.586 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 18:19:42.100 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:19:42.117 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:20:07.783 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-15 18:20:07.884 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-15 18:20:07.885 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-15 18:20:07.886 | INFO     | uvicorn.server:serve:73 - Finished server process [22962]
2022-04-15 18:20:12.477 | INFO     | uvicorn.server:serve:63 - Started server process [23121]
2022-04-15 18:20:12.478 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-15 18:20:12.479 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-15 18:20:12.480 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-15 18:20:16.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:20:17.103 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-15 18:20:20.799 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image_raw
2022-04-15 18:20:20.982 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image_raw
2022-04-16 16:22:03.279 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-16 16:22:03.381 | INFO     | uvicorn.server:serve:73 - Finished server process [23121]
2022-04-16 16:28:00.618 | INFO     | uvicorn.server:serve:63 - Started server process [24725]
2022-04-16 16:28:00.618 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-16 16:28:00.619 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-16 16:28:00.623 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-16 16:28:09.407 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/
2022-04-16 16:28:09.435 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/
2022-04-16 16:28:11.632 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:11.638 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:17.656 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:17.657 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:18.662 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:18.663 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:19.670 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:19.672 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:20.663 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:20.665 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:21.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:21.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:22.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:22.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:23.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:23.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:24.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:24.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:25.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:25.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:26.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:26.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:27.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:27.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:28.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:28.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:29.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:29.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:29.986 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-16 16:28:30.005 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-16 16:28:30.933 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:30.936 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:31.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:31.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:32.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:32.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:33.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:33.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:34.644 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-16 16:28:34.650 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 100, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f8bdd1fe9d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f8bdde81dc0>
    └ <uvicorn.server.Server object at 0x7f8b87f69a90>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f8bdde81e50>
    │    │                  └ <uvicorn.server.Server object at 0x7f8b87f69a90>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f8b87f528b0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84ccb7c0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f8b87f52940>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84ccb7c0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84ccb7c0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8b87f9dac0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84ccb7...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84c...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f8b84d72880>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8b87f9dac0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84ccb7...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84c...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84ccb7...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84c...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8b87f81f70>
          └ <fastapi.applications.FastAPI object at 0x7f8b84d72880>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8b87f889d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8b87f81e50>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8b87f81f70>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '161136', 'cache-control': 'max-age=0', 'sec...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8b87f889d0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84c...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f8bdc5e9ca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8b87f81e50>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f8b87f81e50>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8b87f699d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8b87f81e50>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f8bdc657a60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8b87f699d0>
                     │    │             └ <starlette.requests.Request object at 0x7f8b87bfd550>
                     │    └ <function http_request_logging_middleware at 0x7f8bdc5f4280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8b87f699d0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f8b87bfd550>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8b87f699d0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-84' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/si...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f8b87bfd340 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8b87f69a30>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8b87f699d0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8b87bf7ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f8b84d72070>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8b87f69a30>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8b87bf7ca0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84c...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f8bdc67f4c0>
          └ <fastapi.routing.APIRoute object at 0x7f8b87bf92b0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8b87bf7ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f8b84c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f8b87bf75e0>
          └ <fastapi.routing.APIRoute object at 0x7f8b87bf92b0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f8b84ccb4c0>
                     └ <function get_request_handler.<locals>.app at 0x7f8b87bf7550>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f8bdc66d5e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f8b84d0e820>, 'allowed_names': None}
                 │         └ <function upload at 0x7f8b87bf74c0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f8b87bf92e0>

  File "/workspace/api.py", line 63, in upload
    nparr = np.fromstring(contents, np.uint8)
                          └ b'\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01\x01\x00\x00\x01\x00\x01\x00\x00\xff\xfe\x00\x0cAppleMark\n\xff\xe2\x05(ICC_PROFILE\x00...

NameError: name 'np' is not defined

2022-04-16 16:28:34.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:34.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:35.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:35.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:36.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:36.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:37.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:37.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:38.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:38.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:39.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:39.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:40.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:40.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:41.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:41.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:42.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:42.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:43.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:43.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:44.882 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-16 16:28:44.985 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-16 16:28:44.986 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-16 16:28:44.986 | INFO     | uvicorn.server:serve:73 - Finished server process [24725]
2022-04-16 16:28:56.867 | INFO     | uvicorn.server:serve:63 - Started server process [25063]
2022-04-16 16:28:56.868 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-16 16:28:56.869 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-16 16:28:56.871 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-16 16:28:58.461 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:58.463 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:28:59.471 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:28:59.472 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:00.470 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:00.472 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:01.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:01.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:02.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:02.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:03.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:03.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:04.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:04.931 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:05.470 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:05.472 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:06.915 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:06.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:07.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:07.932 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:08.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:08.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:09.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:09.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:10.076 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-16 16:29:10.091 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 102, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f6257a099d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f625868edc0>
    └ <uvicorn.server.Server object at 0x7f62027764c0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f625868ee50>
    │    │                  └ <uvicorn.server.Server object at 0x7f62027764c0>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f62027688b0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023ff6d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f6202768940>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023ff6d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023ff6d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6203fce3a0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023ff6...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f61fb974dc0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6203fce3a0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023ff6...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023ff6...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f620278afa0>
          └ <fastapi.applications.FastAPI object at 0x7f61fb974dc0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f61fb933b80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f620278a280>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f620278afa0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '161136', 'cache-control': 'max-age=0', 'sec...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f61fb933b80>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f6256df6ca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f620278a280>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f620278a280>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6202776400>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f620278a280>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f6256e63a60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6202776400>
                     │    │             └ <starlette.requests.Request object at 0x7f62023fdf10>
                     │    └ <function http_request_logging_middleware at 0x7f6256e01280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6202776400>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f62023fdf10>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6202776400>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-52' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/si...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f62023fde20 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6202776460>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6202776400>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f61fb933ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f61fb958a30>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6202776460>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f61fb933ca0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f6256e8b4c0>
          └ <fastapi.routing.APIRoute object at 0x7f61fb8bc8b0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f61fb933ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f62023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f61fb9335e0>
          └ <fastapi.routing.APIRoute object at 0x7f61fb8bc8b0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f62023ff160>
                     └ <function get_request_handler.<locals>.app at 0x7f61fb933550>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f6256e7b5e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f62023ff940>, 'allowed_names': None}
                 │         └ <function upload at 0x7f61fb9334c0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f61fb8bc8e0>

  File "/workspace/api.py", line 68, in upload
    detect_image(img, model, allowed_names)
    │            │    │      └ None
    │            │    └ AutoShape(
    │            │        (model): DetectMultiBackend(
    │            │          (model): Model(
    │            │            (model): Sequential(
    │            │              (0): Conv(
    │            │                (conv):...
    │            └ array([[[ 26,  47,  38],
    │                      [ 24,  50,  37],
    │                      [  6,  39,  24],
    │                      ...,
    │                      [ 30,  79,  63],
    │                      [ 41...
    └ <function detect_image at 0x7f6256d78ee0>

  File "/workspace/detector.py", line 16, in detect_image
    results = model(img)
              └ AutoShape(
                  (model): DetectMultiBackend(
                    (model): Model(
                      (model): Sequential(
                        (0): Conv(
                          (conv):...

UnboundLocalError: local variable 'img' referenced before assignment

2022-04-16 16:29:10.936 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:10.938 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:11.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:11.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:12.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:12.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:13.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:13.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:14.145 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-16 16:29:14.246 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-16 16:29:14.247 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-16 16:29:14.248 | INFO     | uvicorn.server:serve:73 - Finished server process [25063]
2022-04-16 16:29:45.877 | INFO     | uvicorn.server:serve:63 - Started server process [25323]
2022-04-16 16:29:45.877 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-16 16:29:45.878 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-16 16:29:45.879 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-16 16:29:45.972 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:45.977 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:46.984 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:46.985 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:47.984 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:47.985 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:49.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:49.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:50.483 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-16 16:29:50.668 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 102, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f84ba1809d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f84bae04dc0>
    └ <uvicorn.server.Server object at 0x7f8464eef700>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f84bae04e50>
    │    │                  └ <uvicorn.server.Server object at 0x7f8464eef700>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f84667818b0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc884c0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f8466781940>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc884c0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc884c0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8464f2c460>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc884...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f845dcd00a0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8464f2c460>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc884...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc884...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8464b6a3d0>
          └ <fastapi.applications.FastAPI object at 0x7f845dcd00a0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8464f049d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8464b6afd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8464b6a3d0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '161136', 'cache-control': 'max-age=0', 'sec...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8464f049d0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f84b956cca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8464b6afd0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f8464b6afd0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8464eef640>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8464b6afd0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f84b95dca60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8464eef640>
                     │    │             └ <starlette.requests.Request object at 0x7f845dc1e190>
                     │    └ <function http_request_logging_middleware at 0x7f84b9578280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8464eef640>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f845dc1e190>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8464eef640>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-20' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/si...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f845dc1e280 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8464eef6a0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8464eef640>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8464b7bca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f845dcd0790>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8464eef6a0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8464b7bca0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f84b96024c0>
          └ <fastapi.routing.APIRoute object at 0x7f845dc1eee0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8464b7bca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f845dc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f8464b7b5e0>
          └ <fastapi.routing.APIRoute object at 0x7f845dc1eee0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f845dc88f40>
                     └ <function get_request_handler.<locals>.app at 0x7f8464b7b550>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f84b95f05e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f845dc88c40>, 'allowed_names': None}
                 │         └ <function upload at 0x7f8464b7b4c0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f845dc1ef10>

  File "/workspace/api.py", line 70, in upload
    num_requests += 1
    └ 0

UnboundLocalError: local variable 'num_requests' referenced before assignment

2022-04-16 16:29:50.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:50.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:51.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:51.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:52.915 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:52.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:53.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:53.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:54.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:54.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:55.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:55.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:56.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:56.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:57.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:57.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:58.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:58.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:29:59.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:29:59.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:00.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:00.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:01.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:01.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:02.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:02.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:03.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:03.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:04.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:04.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:05.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:05.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:06.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:06.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:07.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:07.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:08.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:08.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:09.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:09.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:10.559 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-16 16:30:10.660 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-16 16:30:10.661 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-16 16:30:10.662 | INFO     | uvicorn.server:serve:73 - Finished server process [25323]
2022-04-16 16:30:15.154 | INFO     | uvicorn.server:serve:63 - Started server process [25520]
2022-04-16 16:30:15.156 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-16 16:30:15.157 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-16 16:30:15.158 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-16 16:30:15.404 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:15.407 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:16.413 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:16.415 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:17.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:17.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:18.935 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:18.939 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:19.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:19.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:20.529 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-16 16:30:20.709 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 104, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f2e871179d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f2e87d9bdc0>
    └ <uvicorn.server.Server object at 0x7f2e31e80820>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f2e87d9be50>
    │    │                  └ <uvicorn.server.Server object at 0x7f2e31e80820>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f2e31e648b0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac2ee80>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f2e31e64940>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac2ee80>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac2ee80>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2e55669e50>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac2ee...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f2e2ac71460>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2e55669e50>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac2ee...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac2ee...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2e31eb6be0>
          └ <fastapi.applications.FastAPI object at 0x7f2e2ac71460>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2e31eab9d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e31eb6df0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2e31eb6be0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '161136', 'cache-control': 'max-age=0', 'sec...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2e31eab9d0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f2e86504ca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e31eb6df0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f2e31eb6df0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e31e80790>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e31eb6df0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f2e86571a60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e31e80790>
                     │    │             └ <starlette.requests.Request object at 0x7f2e2abc7070>
                     │    └ <function http_request_logging_middleware at 0x7f2e8650e280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e31e80790>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f2e2abc7070>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e31e80790>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-24' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/si...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f2e2ac2edc0 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2e31e807f0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e31e80790>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e2ac26ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f2e2ac5edc0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2e31e807f0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e2ac26ca0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f2e865994c0>
          └ <fastapi.routing.APIRoute object at 0x7f2e31b11040>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e2ac26ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f2e2ac...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f2e2ac265e0>
          └ <fastapi.routing.APIRoute object at 0x7f2e31b11040>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f2e2ac2ee20>
                     └ <function get_request_handler.<locals>.app at 0x7f2e2ac26550>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f2e865875e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f2e2ac2ebb0>, 'allowed_names': None}
                 │         └ <function upload at 0x7f2e2ac264c0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f2e31b11070>

  File "/workspace/api.py", line 72, in upload
    num_requests += 1
    └ 0

UnboundLocalError: local variable 'num_requests' referenced before assignment

2022-04-16 16:30:20.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:20.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:21.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:21.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:22.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:22.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:23.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:23.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:24.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:24.931 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:25.936 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:25.938 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:26.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:26.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:27.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:27.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:28.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:30:28.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:30:29.359 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-16 16:30:29.460 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-16 16:30:29.461 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-16 16:30:29.461 | INFO     | uvicorn.server:serve:73 - Finished server process [25520]
2022-04-16 16:31:17.631 | INFO     | uvicorn.server:serve:63 - Started server process [25804]
2022-04-16 16:31:17.632 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-16 16:31:17.633 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-16 16:31:17.635 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-16 16:31:19.815 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:19.819 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:20.824 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:20.825 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:21.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:21.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:22.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:22.932 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:23.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:23.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:24.499 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-16 16:31:24.689 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-16 16:31:24.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:24.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:25.934 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:25.935 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:26.839 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:26.840 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:27.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:27.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:28.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:28.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:29.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:29.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:30.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:30.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:31.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:31.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:32.725 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-16 16:31:32.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-16 16:31:32.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:32.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:33.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:33.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:34.828 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:34.829 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:35.829 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:35.831 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:36.831 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:36.832 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:37.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:37.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:38.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:38.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:39.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:39.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:40.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:40.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:41.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:41.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:42.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:42.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:43.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:43.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:44.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:44.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:45.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:45.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:46.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:46.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:47.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:47.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:48.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:48.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:49.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:49.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:50.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:50.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:51.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:51.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:52.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:52.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:53.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:53.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:54.915 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:54.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:55.939 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:55.942 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:56.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:56.931 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:57.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:57.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:58.934 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:58.936 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:31:59.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:31:59.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:00.932 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:00.933 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:01.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:01.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:02.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:02.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:03.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:03.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:04.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:04.931 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:05.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:05.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:06.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:06.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:07.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:07.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:08.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:08.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:09.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:09.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:10.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:10.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:11.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:11.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:12.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:12.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:13.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:13.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:14.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:14.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:15.915 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:15.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:16.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:16.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:17.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:17.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:18.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:18.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:19.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:19.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:20.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:20.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:21.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:21.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:22.931 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:22.932 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:23.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:23.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:24.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:24.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:25.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:25.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:26.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:26.931 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:27.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:27.932 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:28.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:28.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:29.915 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:29.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:30.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:30.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:31.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:31.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:32.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:32.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:33.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:33.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:34.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:34.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:35.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:35.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:36.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:36.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:37.938 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:37.941 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:38.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:38.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:39.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:39.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:40.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:40.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:41.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:41.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:42.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:42.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:43.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:43.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:44.954 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:44.956 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:45.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:45.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:46.945 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:46.948 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:47.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:47.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:48.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:48.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:49.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:49.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:50.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:50.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:51.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:51.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:52.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:52.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:53.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:53.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:54.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:54.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:55.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:55.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:56.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:56.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:57.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:57.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:58.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:58.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:32:59.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:32:59.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:00.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:00.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:01.931 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:01.932 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:02.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:02.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:03.936 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:03.938 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:04.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:04.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:05.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:05.931 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:06.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:06.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:07.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:07.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:08.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:08.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:09.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:09.917 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:10.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:10.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:11.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:11.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:12.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:12.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:13.918 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:13.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:14.914 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:14.916 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:15.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:15.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:16.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:16.924 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:17.919 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:17.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:18.929 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:18.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:19.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:19.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:20.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:20.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:21.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:21.932 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:22.928 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:22.930 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:23.925 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:33:23.926 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:33:24.008 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-16 16:33:24.109 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-16 16:33:24.109 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-16 16:33:24.110 | INFO     | uvicorn.server:serve:73 - Finished server process [25804]
2022-04-16 16:34:34.232 | INFO     | uvicorn.server:serve:63 - Started server process [26825]
2022-04-16 16:34:34.233 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-16 16:34:34.234 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-16 16:34:34.237 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-16 16:34:34.933 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:34:34.947 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:34:35.921 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:34:35.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:34:36.932 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:34:36.933 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:34:37.932 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:34:37.933 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:34:38.920 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:34:38.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:34:39.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:34:39.923 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:34:40.829 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/api
2022-04-16 16:34:40.831 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/api
2022-04-16 16:35:04.865 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-16 16:35:05.048 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-16 16:45:59.280 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-16 16:45:59.519 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-16 16:47:57.481 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-16 16:47:57.582 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-16 16:47:57.583 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-16 16:47:57.584 | INFO     | uvicorn.server:serve:73 - Finished server process [26825]
2022-04-26 18:25:17.242 | INFO     | uvicorn.server:serve:63 - Started server process [481]
2022-04-26 18:25:17.247 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:25:17.249 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:25:17.252 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-26 18:25:47.167 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/
2022-04-26 18:25:47.201 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/
2022-04-26 18:25:47.406 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/favicon.ico
2022-04-26 18:25:47.407 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 404 for http://localhost:4242/favicon.ico
2022-04-26 18:26:39.200 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-26 18:26:39.302 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:26:39.303 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:26:39.309 | INFO     | uvicorn.server:serve:73 - Finished server process [481]
2022-04-26 18:27:39.308 | INFO     | uvicorn.server:serve:63 - Started server process [1373]
2022-04-26 18:27:39.310 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:27:39.312 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:27:39.314 | ERROR    | uvicorn.server:startup:153 - [Errno 99] error while attempting to bind on address ('192.168.0.192', 4242): cannot assign requested address
2022-04-26 18:27:39.316 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:27:39.317 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:28:03.931 | INFO     | uvicorn.server:serve:63 - Started server process [1514]
2022-04-26 18:28:03.933 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:28:03.934 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:28:03.937 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://127.0.0.1:4242 (Press CTRL+C to quit)
2022-04-26 18:29:02.294 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-26 18:29:02.395 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:29:02.395 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:29:02.396 | INFO     | uvicorn.server:serve:73 - Finished server process [1514]
2022-04-26 18:29:24.888 | INFO     | uvicorn.server:serve:63 - Started server process [1865]
2022-04-26 18:29:24.889 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:29:24.890 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:29:24.892 | ERROR    | uvicorn.server:startup:153 - [Errno 99] error while attempting to bind on address ('192.168.0.192', 4242): cannot assign requested address
2022-04-26 18:29:24.893 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:29:24.894 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:30:47.251 | INFO     | uvicorn.server:serve:63 - Started server process [2155]
2022-04-26 18:30:47.253 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:30:47.253 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:30:47.255 | ERROR    | uvicorn.server:startup:153 - [Errno 99] error while attempting to bind on address ('172.0.0.1', 4242): cannot assign requested address
2022-04-26 18:30:47.256 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:30:47.258 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:31:16.732 | INFO     | uvicorn.server:serve:63 - Started server process [2309]
2022-04-26 18:31:16.733 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:31:16.733 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:31:16.735 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-26 18:31:19.095 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/
2022-04-26 18:31:19.101 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/
2022-04-26 18:31:39.410 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://192.168.0.192:4242/
2022-04-26 18:31:39.417 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://192.168.0.192:4242/
2022-04-26 18:31:39.575 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://192.168.0.192:4242/favicon.ico
2022-04-26 18:31:39.577 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 404 for http://192.168.0.192:4242/favicon.ico
2022-04-26 18:36:17.263 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-26 18:36:17.364 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:36:17.365 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:36:17.365 | INFO     | uvicorn.server:serve:73 - Finished server process [2309]
2022-04-26 18:36:23.303 | INFO     | uvicorn.server:serve:63 - Started server process [3320]
2022-04-26 18:36:23.304 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:36:23.304 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:36:23.307 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-26 18:37:19.823 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://192.168.0.192:4242/
2022-04-26 18:37:19.827 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://192.168.0.192:4242/
2022-04-26 18:37:20.110 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://192.168.0.192:4242/favicon.ico
2022-04-26 18:37:20.111 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 404 for http://192.168.0.192:4242/favicon.ico
2022-04-26 18:43:30.150 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-26 18:43:30.252 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:43:30.255 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:43:30.257 | INFO     | uvicorn.server:serve:73 - Finished server process [3320]
2022-04-26 18:44:45.273 | INFO     | uvicorn.server:serve:63 - Started server process [4924]
2022-04-26 18:44:45.275 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:44:45.277 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:44:45.280 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-26 18:44:48.131 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-26 18:44:48.142 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-26 18:45:02.185 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:45:03.349 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 106, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f174cfe29d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f174dc66dc0>
    └ <uvicorn.server.Server object at 0x7f16f961d7c0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f174dc66e50>
    │    │                  └ <uvicorn.server.Server object at 0x7f16f961d7c0>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f16f7dcba60>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f7996070>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f16f7dcbaf0>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f7996070>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f7996070>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f16f7dc3700>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f79960...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f79...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f16f513d880>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f16f7dc3700>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f79960...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f79...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f79960...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f79...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f16f798a820>
          └ <fastapi.applications.FastAPI object at 0x7f16f513d880>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f16f7ddbca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f79...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f16f798a3d0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f16f798a820>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '4372558', 'cache-control': 'max-age=0', 'se...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f16f7ddbca0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f79...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f174c42d700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f16f798a3d0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f16f798a3d0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f79...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f16f961d700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f16f798a3d0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f174c4224c0>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f16f961d700>
                     │    │             └ <starlette.requests.Request object at 0x7f16f7996fd0>
                     │    └ <function http_request_logging_middleware at 0x7f174c42dca0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f16f961d700>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f16f7996fd0>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f16f961d700>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-8' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f16f7996c40 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f79...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f16f961d760>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f16f961d700>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f16f7ddbdc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f79...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f16f513db80>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f16f961d760>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f16f7ddbdc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f79...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f174c4fdee0>
          └ <fastapi.routing.APIRoute object at 0x7f16f50878e0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f16f7ddbdc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f16f79...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f16f7ddb700>
          └ <fastapi.routing.APIRoute object at 0x7f16f50878e0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f16f50930a0>
                     └ <function get_request_handler.<locals>.app at 0x7f16f7ddb670>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f174c4fd040>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f16f50932e0>, 'allowed_names': None}
                 │         └ <function upload at 0x7f16f7ddb5e0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f16f5087910>

  File "/workspace/api.py", line 76, in upload
    return FileResponse('temp.png')
           └ <class 'starlette.responses.FileResponse'>

  File "/usr/local/lib/python3.8/site-packages/starlette/responses.py", line 251, in __init__
    assert aiofiles is not None, "'aiofiles' must be installed to use FileResponse"
           └ None

AssertionError: 'aiofiles' must be installed to use FileResponse

2022-04-26 18:45:10.018 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-26 18:45:10.119 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:45:10.120 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:45:10.120 | INFO     | uvicorn.server:serve:73 - Finished server process [4924]
2022-04-26 18:45:33.178 | INFO     | uvicorn.server:serve:63 - Started server process [5241]
2022-04-26 18:45:33.179 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:45:33.180 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:45:33.182 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-26 18:45:40.548 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:45:41.617 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:46:35.236 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-26 18:46:35.341 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:46:35.345 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:46:35.348 | INFO     | uvicorn.server:serve:73 - Finished server process [5241]
2022-04-26 18:46:45.770 | INFO     | uvicorn.server:serve:63 - Started server process [5518]
2022-04-26 18:46:45.774 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:46:45.777 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:46:45.788 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-26 18:46:46.395 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-26 18:46:46.423 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-26 18:46:53.305 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:46:54.480 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:47:13.367 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-26 18:47:13.471 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:47:13.474 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:47:13.476 | INFO     | uvicorn.server:serve:73 - Finished server process [5518]
2022-04-26 18:47:24.892 | INFO     | uvicorn.server:serve:63 - Started server process [5729]
2022-04-26 18:47:24.894 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:47:24.895 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:47:24.899 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-26 18:47:26.459 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-26 18:47:26.483 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-26 18:47:28.585 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:47:28.604 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:399 - Exception in ASGI application
Traceback (most recent call last):

  File "api.py", line 106, in <module>
    uvicorn.run(
    │       └ <function run at 0x7f60c192e9d0>
    └ <module 'uvicorn' from '/usr/local/lib/python3.8/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.8/site-packages/uvicorn/main.py", line 386, in run
    server.run()
    │      └ <function Server.run at 0x7f60c25b2dc0>
    └ <uvicorn.server.Server object at 0x7f606df11880>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 48, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ None
    │    │                  │    └ <function Server.serve at 0x7f60c25b2e50>
    │    │                  └ <uvicorn.server.Server object at 0x7f606df11880>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 396, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f606c348040>
                   │   │    │      │    │        └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2fda90>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f606c3480d0>
                   │   │    │      └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2fda90>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                   │   └ <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2fda90>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f606c31e7f0>
  File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2fda...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f6069610f40>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f606c31e7f0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2fda...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
  File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2fda...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f606c2ff9a0>
          └ <fastapi.applications.FastAPI object at 0x7f6069610f40>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f606c30e280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f606c2ffa00>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f606c2ff9a0>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:4242', 'connection': 'keep-alive', 'content-length': '188', 'cache-control': 'max-age=0', 'sec-ch...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f606c30e280>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f60c0d19ca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f606c2ffa00>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f606c2ffa00>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f606df117c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f606c2ffa00>
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 25, in __call__
    response = await self.dispatch_func(request, self.call_next)
                     │    │             │        │    └ <function BaseHTTPMiddleware.call_next at 0x7f60c0d88a60>
                     │    │             │        └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f606df117c0>
                     │    │             └ <starlette.requests.Request object at 0x7f606c30d7f0>
                     │    └ <function http_request_logging_middleware at 0x7f60c0d26280>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f606df117c0>

  File "/workspace/utilities/logging/handlers.py", line 38, in http_request_logging_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.requests.Request object at 0x7f606c30d7f0>
                               └ <bound method BaseHTTPMiddleware.call_next of <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f606df117c0>>

  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 45, in call_next
    task.result()
    │    └ <method 'result' of '_asyncio.Task' objects>
    └ <Task finished name='Task-8' coro=<BaseHTTPMiddleware.call_next.<locals>.coro() done, defined at /usr/local/lib/python3.8/sit...
  File "/usr/local/lib/python3.8/site-packages/starlette/middleware/base.py", line 38, in coro
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method Queue.put of <Queue at 0x7f606c30daf0 maxsize=0 tasks=1>>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f606df11820>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f606df117c0>
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/usr/local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f606c30e430>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f60696104f0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f606df11820>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f606c30e430>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │     └ <function Route.handle at 0x7f60c0db04c0>
          └ <fastapi.routing.APIRoute object at 0x7f60695d89a0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f606c30e430>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f606c2...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('172.19.0.2', 4242), 'c...
          │    └ <function request_response.<locals>.app at 0x7f606c300ca0>
          └ <fastapi.routing.APIRoute object at 0x7f60695d89a0>
  File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f606c30db80>
                     └ <function get_request_handler.<locals>.app at 0x7f606c300c10>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f60c0d9d5e0>
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'file': <starlette.datastructures.UploadFile object at 0x7f606c2fd670>, 'allowed_names': None}
                 │         └ <function upload at 0x7f606c300b80>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f60695d89d0>

  File "/workspace/api.py", line 68, in upload
    img = cv2.imdecode(nparr, cv2.IMREAD_COLOR)
          │   │        │      │   └ 1
          │   │        │      └ <module 'cv2.cv2' from '/usr/local/lib/python3.8/site-packages/cv2/cv2.cpython-38-x86_64-linux-gnu.so'>
          │   │        └ array([], dtype=uint8)
          │   └ <built-in function imdecode>
          └ <module 'cv2.cv2' from '/usr/local/lib/python3.8/site-packages/cv2/cv2.cpython-38-x86_64-linux-gnu.so'>

cv2.error: OpenCV(4.2.0) /io/opencv/modules/imgcodecs/src/loadsave.cpp:730: error: (-215:Assertion failed) !buf.empty() in function 'imdecode_'


2022-04-26 18:47:34.931 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:47:36.058 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:47:52.732 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-26 18:47:52.836 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:47:52.838 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:47:52.840 | INFO     | uvicorn.server:serve:73 - Finished server process [5729]
2022-04-26 18:48:02.920 | INFO     | uvicorn.server:serve:63 - Started server process [5964]
2022-04-26 18:48:02.922 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:48:02.924 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:48:02.927 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-26 18:48:03.073 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-26 18:48:03.096 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-26 18:48:03.393 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-26 18:48:03.396 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-26 18:48:09.780 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:48:10.503 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:48:25.168 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-26 18:48:25.270 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:48:25.272 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:48:25.274 | INFO     | uvicorn.server:serve:73 - Finished server process [5964]
2022-04-26 18:48:35.482 | INFO     | uvicorn.server:serve:63 - Started server process [6158]
2022-04-26 18:48:35.484 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:48:35.485 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:48:35.488 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-26 18:48:35.692 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-26 18:48:35.738 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-26 18:48:38.157 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-26 18:48:38.164 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-26 18:48:58.751 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:48:59.216 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:49:52.567 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-26 18:49:52.670 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:49:52.671 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:49:52.671 | INFO     | uvicorn.server:serve:73 - Finished server process [6158]
2022-04-26 18:49:59.565 | INFO     | uvicorn.server:serve:63 - Started server process [6563]
2022-04-26 18:49:59.567 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:49:59.569 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:49:59.571 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-26 18:50:01.350 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-26 18:50:01.361 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-26 18:50:06.463 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:50:06.927 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:50:29.664 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:50:30.019 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:50:35.433 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-26 18:50:35.534 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:50:35.535 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:50:35.536 | INFO     | uvicorn.server:serve:73 - Finished server process [6563]
2022-04-26 18:50:41.317 | INFO     | uvicorn.server:serve:63 - Started server process [6781]
2022-04-26 18:50:41.327 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:50:41.330 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:50:41.336 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-26 18:51:11.889 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:51:12.171 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:51:24.102 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-26 18:51:24.203 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:51:24.204 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:51:24.205 | INFO     | uvicorn.server:serve:73 - Finished server process [6781]
2022-04-26 18:51:28.654 | INFO     | uvicorn.server:serve:63 - Started server process [7039]
2022-04-26 18:51:28.655 | INFO     | uvicorn.lifespan.on:startup:26 - Waiting for application startup.
2022-04-26 18:51:28.656 | INFO     | uvicorn.lifespan.on:startup:38 - Application startup complete.
2022-04-26 18:51:28.657 | INFO     | uvicorn.server:startup:166 - Uvicorn running on http://0.0.0.0:4242 (Press CTRL+C to quit)
2022-04-26 18:52:20.859 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:52:21.349 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:52:36.922 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:52:37.093 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:52:55.130 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:52:55.326 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:55:07.391 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://192.168.0.192:4242/
2022-04-26 18:55:07.397 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://192.168.0.192:4242/
2022-04-26 18:55:55.107 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-26 18:55:55.114 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-26 18:56:33.470 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:56:33.702 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:56:40.328 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP GET for http://localhost:4242/index
2022-04-26 18:56:40.331 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/index
2022-04-26 18:56:53.855 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:56:54.080 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:58:21.282 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:58:21.554 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:58:27.524 | INFO     | utilities.logging.handlers:http_request_logging_middleware:37 - HTTP POST for http://localhost:4242/image
2022-04-26 18:58:27.771 | INFO     | utilities.logging.handlers:http_request_logging_middleware:39 - HTTP 200 for http://localhost:4242/image
2022-04-26 18:58:43.515 | INFO     | uvicorn.server:shutdown:209 - Shutting down
2022-04-26 18:58:43.616 | INFO     | uvicorn.lifespan.on:shutdown:43 - Waiting for application shutdown.
2022-04-26 18:58:43.617 | INFO     | uvicorn.lifespan.on:shutdown:46 - Application shutdown complete.
2022-04-26 18:58:43.618 | INFO     | uvicorn.server:serve:73 - Finished server process [7039]
